<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-04-16 Wed 21:51 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs configuration</title>
<meta name="author" content="Patrick D. Elliott" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Emacs configuration</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org4234a81">1. Useful resources</a></li>
<li><a href="#orge192ba5">2. Early init file</a></li>
<li><a href="#orgab20350">3. Package management</a>
<ul>
<li><a href="#orgd35d761">3.1. <code>init.el</code> header</a></li>
<li><a href="#orgf28a4c7">3.2. <code>Elpaca</code></a>
<ul>
<li><a href="#org7398dce">3.2.1. Bootstrap <code>elpaca</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org3ea0353">4. Emacs</a>
<ul>
<li><a href="#org3fa8976">4.1. Variables</a></li>
<li><a href="#org0aa8468">4.2. Defaults</a></li>
<li><a href="#org29822d2">4.3. Browse url</a></li>
<li><a href="#org004f44d">4.4. Electric</a></li>
<li><a href="#org0d5e6f0">4.5. Ediff</a></li>
</ul>
</li>
<li><a href="#orgf5dd66d">5. Keybindings</a>
<ul>
<li><a href="#org374c17b">5.1. Evil</a>
<ul>
<li><a href="#org1d19be2">5.1.1. Evil collection</a></li>
<li><a href="#org1b1c6d3">5.1.2. Evil commentary</a></li>
<li><a href="#org244138a">5.1.3. Evil surround</a></li>
<li><a href="#org6a0152c">5.1.4. Evil goggles</a></li>
</ul>
</li>
<li><a href="#orgcdc418b">5.2. General</a></li>
<li><a href="#org2d7e242">5.3. Org mode</a></li>
<li><a href="#org51be791">5.4. Avy</a>
<ul>
<li><a href="#org0015707">5.4.1. Link hint</a></li>
</ul>
</li>
<li><a href="#org67e222a">5.5. Which key</a></li>
</ul>
</li>
<li><a href="#org4a48157">6. Appearance</a>
<ul>
<li><a href="#orga0210a0">6.1. Mode line</a></li>
<li><a href="#org313b413">6.2. Minions</a></li>
<li><a href="#org11865ff">6.3. Icons</a></li>
<li><a href="#org88f8a3a">6.4. Olivetti</a></li>
<li><a href="#org2ac9340">6.5. Fonts</a></li>
<li><a href="#orgb31a3dd">6.6. Themes</a></li>
</ul>
</li>
<li><a href="#orgb7721a9">7. Organization</a>
<ul>
<li><a href="#org51d64c9">7.1. Buffer management</a>
<ul>
<li><a href="#org9e08ecf">7.1.1. <code>Popper</code></a></li>
<li><a href="#orgb22762d">7.1.2. <code>bufler</code></a></li>
<li><a href="#org84eb2fb">7.1.3. Projects</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org67e9591">8. Languages</a>
<ul>
<li><a href="#org16230d7">8.1. Lua</a></li>
<li><a href="#orge72653a">8.2. Lisp</a>
<ul>
<li><a href="#org4cd12df">8.2.1. Sly</a></li>
<li><a href="#orgb194b73">8.2.2. lispy</a></li>
</ul>
</li>
<li><a href="#org42cb6f2">8.3. js</a></li>
<li><a href="#org5e4de31">8.4. Rust</a></li>
<li><a href="#org42ab475">8.5. <span class="todo TODO">TODO</span> haskell</a></li>
<li><a href="#org3432244">8.6. racket</a></li>
<li><a href="#org7e40527">8.7. nix</a></li>
<li><a href="#org272787e">8.8. markdown</a></li>
</ul>
</li>
<li><a href="#org0cb46b9">9. Latex</a>
<ul>
<li>
<ul>
<li><a href="#org8b451dd">9.0.1. Engrave</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6e0f7da">10. Org</a>
<ul>
<li><a href="#orgd22d801">10.1. Evil integration</a></li>
<li><a href="#org6966988">10.2. Org-auctex</a></li>
<li><a href="#org12a635b">10.3. Transclusion</a></li>
<li><a href="#org8e694f9">10.4. Appear</a></li>
<li><a href="#org6a53771">10.5. Cliplink</a></li>
<li><a href="#org0e3bd7b">10.6. Org modern</a></li>
<li><a href="#orgf71e4f8">10.7. Org roam</a></li>
<li><a href="#org8612c29">10.8. Export</a></li>
<li><a href="#org10c1e2a">10.9. Highlighting</a></li>
<li><a href="#org2fa2059">10.10. Org-noter</a></li>
</ul>
</li>
<li><a href="#org070a0b8">11. Completion</a>
<ul>
<li><a href="#org2d06ae2">11.1. Vertico with orderless and marginalia</a></li>
<li><a href="#org2d28bb7">11.2. Consult</a></li>
<li><a href="#org3d548bb">11.3. Affe</a></li>
<li><a href="#org62762ba">11.4. Embark</a></li>
<li><a href="#org795588c">11.5. Corfu</a>
<ul>
<li><a href="#orgef2ed63">11.5.1. Cape</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org2438181">12. Checkers</a>
<ul>
<li><a href="#org50c9830">12.1. Flymake</a></li>
</ul>
</li>
<li><a href="#orgfb4602d">13. Tools</a>
<ul>
<li><a href="#org249c1bb">13.1. Recursion indicator</a></li>
<li><a href="#org576214e">13.2. Regular expressions</a></li>
<li><a href="#org7115a0b">13.3. PDF tools</a></li>
<li><a href="#orge693677">13.4. Jinx</a></li>
<li><a href="#orgbde0ae6">13.5. Helpful</a></li>
<li><a href="#org2b400b5">13.6. Deadgrep</a></li>
<li><a href="#orgd34f0da">13.7. Snippets</a>
<ul>
<li><a href="#orgefa782b">13.7.1. Auto-activating snippets</a></li>
<li><a href="#org86eb88d">13.7.2. yasnippet</a></li>
<li><a href="#orgc10c9d3">13.7.3. Tempel</a></li>
</ul>
</li>
<li><a href="#org9aa75b8">13.8. Web preview</a></li>
<li><a href="#orga86c472">13.9. FIXME Magit</a></li>
<li><a href="#org30bb5a8">13.10. Eshell</a></li>
<li><a href="#org22d7c0a">13.11. Language servers</a>
<ul>
<li><a href="#org9c891ce">13.11.1. LSP mode</a></li>
<li><a href="#org8d270e8">13.11.2. Eglot</a></li>
</ul>
</li>
<li><a href="#org80cdb4a">13.12. direnv</a></li>
<li><a href="#orgcc46101">13.13. Kmonad</a></li>
<li><a href="#org41f3412">13.14. Elfeed</a></li>
<li><a href="#orgf738075">13.15. Notmuch</a>
<ul>
<li><a href="#org2a68e36">13.15.1. <span class="todo TODO">TODO</span> figure out why sent mail is saved to the home folder</a></li>
<li><a href="#org3857916">13.15.2. <span class="todo TODO">TODO</span> consult-notmuch</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org972ef96">14. Staging grounds</a>
<ul>
<li><a href="#org2fa1667">14.1. Denote</a></li>
<li><a href="#org19e56c6">14.2. Consult notes</a></li>
<li><a href="#org5274567">14.3. Ace window</a></li>
<li><a href="#org0488130">14.4. Rainbow mode</a></li>
<li><a href="#org1a09d8d">14.5. Burly</a></li>
<li><a href="#orgd975570">14.6. Ebib</a>
<ul>
<li><a href="#org606b224">14.6.1. <span class="todo TODO">TODO</span> add biblio support</a></li>
</ul>
</li>
<li><a href="#orgcae2444">14.7. Tree-sitter</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Currently tailored for GNU Emacs 30.1.
</p>
<div id="outline-container-org4234a81" class="outline-2">
<h2 id="org4234a81"><span class="section-number-2">1.</span> Useful resources</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li><a href="https://www.lucacambiaghi.com/vanilla-emacs/readme.html">Luca's literate Emacs config</a></li>
<li><a href="https://github.com/alphapapa/ap.el">GitHub - alphapapa/ap.el: A simple, Emacs Lisp-focused Emacs config</a></li>
<li><a href="https://github.com/abo-abo/oremacs">GitHub - abo-abo/oremacs: My Emacs config</a></li>
<li><a href="https://github.com/jwiegley/dot-emacs">GitHub - jwiegley/dot-emacs: My .emacs.el file and other personal Emacs goodies</a></li>
<li><a href="https://tecosaur.github.io/emacs-config/config.html">Tecoaur's Doom Emacs Configuration</a></li>
</ul>
</div>
</div>
<div id="outline-container-orge192ba5" class="outline-2">
<h2 id="orge192ba5"><span class="section-number-2">2.</span> Early init file</h2>
<div class="outline-text-2" id="text-2">
<p>
Since we're using <code>elpaca</code> as our package manager, we add the following to <code>early-init.el</code> to prevent <code>package.el</code> from loading packages, prior to our init file loading.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #6c7086;">;;; </span><span style="color: #6c7086;">early-init.el --- Early Init File -*- lexical-binding: t; no-byte-compile: t -*-</span>

(<span style="color: #cba6f7;">setq</span> package-enable-at-startup nil)
</pre>
</div>

<p>
Disable GUI elements before we have a chance to peek.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #6c7086;">;; </span><span style="color: #6c7086;">minimal UI</span>
(menu-bar-mode -1) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">disables menubar</span>
(tool-bar-mode -1) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">disables toolbar</span>
(scroll-bar-mode -1) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">disables scrollbar</span>
(pixel-scroll-precision-mode 1) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">enable smooth scrolling</span>

(<span style="color: #cba6f7;">setq</span> inhibit-splash-screen t <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">no thanks</span>
        use-file-dialog nil <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">don't use system file dialog</span>
        tab-bar-new-button-show nil <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">don't show new tab button</span>
        tab-bar-close-button-show nil <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">don't show tab close button</span>
        tab-line-close-button-show nil) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">don't show tab close button</span>
<span style="color: #6c7086;">;;; </span><span style="color: #6c7086;">early-init.el ends here</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgab20350" class="outline-2">
<h2 id="orgab20350"><span class="section-number-2">3.</span> Package management</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgd35d761" class="outline-3">
<h3 id="orgd35d761"><span class="section-number-3">3.1.</span> <code>init.el</code> header</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #6c7086;">;;; </span><span style="color: #6c7086;">init.el --- Personal configuration file -*- lexical-binding: t; no-byte-compile: t; -*-</span>
<span style="color: #6c7086;">;; </span><span style="color: #6c7086;">NOTE: init.el is now generated from readme.org.  Please edit that file instead</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf28a4c7" class="outline-3">
<h3 id="orgf28a4c7"><span class="section-number-3">3.2.</span> <code>Elpaca</code></h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><a href="https://github.com/progfolio/elpaca">GitHub - progfolio/elpaca: An elisp package manager</a></li>
</ul>
</div>
<div id="outline-container-org7398dce" class="outline-4">
<h4 id="org7398dce"><span class="section-number-4">3.2.1.</span> Bootstrap <code>elpaca</code></h4>
<div class="outline-text-4" id="text-3-2-1">
<ul class="org-ul">
<li><a href="https://github.com/progfolio/elpaca?tab=readme-ov-file#installer">Bootstrap instructions</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">elpaca-installer-version</span> 0.10)
(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">elpaca-directory</span> (expand-file-name <span style="color: #a6e3a1;">"elpaca/"</span> user-emacs-directory))
(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">elpaca-builds-directory</span> (expand-file-name <span style="color: #a6e3a1;">"builds/"</span> elpaca-directory))
(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">elpaca-repos-directory</span> (expand-file-name <span style="color: #a6e3a1;">"repos/"</span> elpaca-directory))
(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">elpaca-order</span> '(elpaca <span style="color: #f38ba8;">:repo</span> <span style="color: #a6e3a1;">"https://github.com/progfolio/elpaca.git"</span>
                              <span style="color: #f38ba8;">:ref</span> nil <span style="color: #f38ba8;">:depth</span> 1 <span style="color: #f38ba8;">:inherit</span> ignore
                              <span style="color: #f38ba8;">:files</span> (<span style="color: #f38ba8;">:defaults</span> <span style="color: #a6e3a1;">"elpaca-test.el"</span> (<span style="color: #f38ba8;">:exclude</span> <span style="color: #a6e3a1;">"extensions"</span>))
                              <span style="color: #f38ba8;">:build</span> (<span style="color: #f38ba8;">:not</span> elpaca--activate-package)))
(<span style="color: #cba6f7;">let*</span> ((repo  (expand-file-name <span style="color: #a6e3a1;">"elpaca/"</span> elpaca-repos-directory))
       (build (expand-file-name <span style="color: #a6e3a1;">"elpaca/"</span> elpaca-builds-directory))
       (order (cdr elpaca-order))
       (default-directory repo))
  (add-to-list 'load-path (<span style="color: #cba6f7;">if</span> (file-exists-p build) build repo))
  (<span style="color: #cba6f7;">unless</span> (file-exists-p repo)
    (make-directory repo t)
    (<span style="color: #cba6f7;">when</span> (&lt;= emacs-major-version 28) (<span style="color: #cba6f7;">require</span> '<span style="color: #fab387;">subr-x</span>))
    (<span style="color: #cba6f7;">condition-case-unless-debug</span> err
        (<span style="color: #cba6f7;">if-let*</span> ((buffer (pop-to-buffer-same-window <span style="color: #a6e3a1;">"*elpaca-bootstrap*"</span>))
                  ((zerop (apply #'call-process `(<span style="color: #a6e3a1;">"git"</span> nil ,buffer t <span style="color: #a6e3a1;">"clone"</span>
                                                  ,@(<span style="color: #cba6f7;">when-let*</span> ((depth (plist-get order <span style="color: #f38ba8;">:depth</span>)))
                                                      (list (format <span style="color: #a6e3a1;">"--depth=%d"</span> depth) <span style="color: #a6e3a1;">"--no-single-branch"</span>))
                                                  ,(plist-get order <span style="color: #f38ba8;">:repo</span>) ,repo))))
                  ((zerop (call-process <span style="color: #a6e3a1;">"git"</span> nil buffer t <span style="color: #a6e3a1;">"checkout"</span>
                                        (<span style="color: #cba6f7;">or</span> (plist-get order <span style="color: #f38ba8;">:ref</span>) <span style="color: #a6e3a1;">"--"</span>))))
                  (emacs (concat invocation-directory invocation-name))
                  ((zerop (call-process emacs nil buffer nil <span style="color: #a6e3a1;">"-Q"</span> <span style="color: #a6e3a1;">"-L"</span> <span style="color: #a6e3a1;">"."</span> <span style="color: #a6e3a1;">"--batch"</span>
                                        <span style="color: #a6e3a1;">"--eval"</span> <span style="color: #a6e3a1;">"(byte-recompile-directory \".\" 0 'force)"</span>)))
                  ((<span style="color: #cba6f7;">require</span> '<span style="color: #fab387;">elpaca</span>))
                  ((elpaca-generate-autoloads <span style="color: #a6e3a1;">"elpaca"</span> repo)))
            (<span style="color: #cba6f7;">progn</span> (message <span style="color: #a6e3a1;">"%s"</span> (buffer-string)) (kill-buffer buffer))
          (<span style="color: #f9e2af;">error</span> <span style="color: #a6e3a1;">"%s"</span> (<span style="color: #cba6f7;">with-current-buffer</span> buffer (buffer-string))))
      ((<span style="color: #f9e2af;">error</span>) (<span style="color: #f9e2af;">warn</span> <span style="color: #a6e3a1;">"%s"</span> err) (delete-directory repo 'recursive))))
  (<span style="color: #cba6f7;">unless</span> (<span style="color: #cba6f7;">require</span> '<span style="color: #fab387;">elpaca-autoloads</span> nil t)
    (<span style="color: #cba6f7;">require</span> '<span style="color: #fab387;">elpaca</span>)
    (elpaca-generate-autoloads <span style="color: #a6e3a1;">"elpaca"</span> repo)
    (load <span style="color: #a6e3a1;">"./elpaca-autoloads"</span>)))
(add-hook 'after-init-hook #'elpaca-process-queues)
(<span style="color: #cba6f7;">elpaca</span> `(,@elpaca-order))
</pre>
</div>

<p>
Enable <code>use-package</code> support for <code>elpaca</code>, and <code>:ensure</code> packages by default.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">elpaca</span> elpaca-use-package
  (elpaca-use-package-mode))
(<span style="color: #cba6f7;">setq</span> use-package-always-ensure t)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org3ea0353" class="outline-2">
<h2 id="org3ea0353"><span class="section-number-2">4.</span> Emacs</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org3fa8976" class="outline-3">
<h3 id="org3fa8976"><span class="section-number-3">4.1.</span> Variables</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">patrl/library-path</span> <span style="color: #a6e3a1;">"~/MEGA/library/"</span>
  <span style="color: #6c7086;">"Directory .pdf collection lives."</span>)

(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">patrl/notes-path</span> <span style="color: #a6e3a1;">"~/MEGA/org/roam/"</span>
  <span style="color: #6c7086;">"Notes."</span>)

(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">patrl/journal-path</span> (concat patrl/notes-path <span style="color: #a6e3a1;">"daily/"</span>)
  <span style="color: #6c7086;">"Journal entries."</span>)

(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">patrl/global-bib-file</span> <span style="color: #a6e3a1;">"~/texmf/bibtex/bib/master.bib"</span>
  <span style="color: #6c7086;">"Bibliography."</span>)

(<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">patrl/org-path</span> <span style="color: #a6e3a1;">"~/MEGA/org/"</span>
  <span style="color: #6c7086;">"Org path."</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org0aa8468" class="outline-3">
<h3 id="org0aa8468"><span class="section-number-3">4.2.</span> Defaults</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><a href="https://idiomdrottning.org/bad-emacs-defaults">Bad Emacs defaults</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> emacs
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:init</span>

  (<span style="color: #cba6f7;">setq</span> enable-recursive-minibuffers t)

  (<span style="color: #cba6f7;">setq</span> backup-by-copying t)

  (<span style="color: #cba6f7;">setq</span> sentence-end-double-space nil)

  (<span style="color: #cba6f7;">setq</span> frame-inhibit-implied-resize t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">useless for a tiling window manager</span>

  (<span style="color: #cba6f7;">setq</span> show-trailing-whitespace t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">self-explanatory</span>

  (<span style="color: #cba6f7;">setq</span> user-full-name <span style="color: #a6e3a1;">"Patrick D. Elliott"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">my details</span>
  (<span style="color: #cba6f7;">setq</span> user-mail-address <span style="color: #a6e3a1;">"patrick.d.elliott@gmail.com"</span>)

  (<span style="color: #cba6f7;">defalias</span> '<span style="color: #89b4fa;">yes-or-no-p</span> 'y-or-n-p) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">life is too short</span>

  (<span style="color: #cba6f7;">setq</span> indent-tabs-mode nil) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">no tabs</span>

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">keep backup and save files in a dedicated directory</span>
  (<span style="color: #cba6f7;">setq</span> backup-directory-alist
          `((<span style="color: #a6e3a1;">".*"</span> . ,(concat user-emacs-directory <span style="color: #a6e3a1;">"backups"</span>)))
          auto-save-file-name-transforms
          `((<span style="color: #a6e3a1;">".*"</span> ,(concat user-emacs-directory <span style="color: #a6e3a1;">"backups"</span>) t)))

  (<span style="color: #cba6f7;">setq</span> create-lockfiles nil) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">no need to create lockfiles</span>

  (set-charset-priority 'unicode) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">utf8 everywhere</span>
  (<span style="color: #cba6f7;">setq</span> locale-coding-system 'utf-8
          coding-system-for-read 'utf-8
          coding-system-for-write 'utf-8)
  (set-terminal-coding-system 'utf-8)
  (set-keyboard-coding-system 'utf-8)
  (set-selection-coding-system 'utf-8)
  (prefer-coding-system 'utf-8)
  (<span style="color: #cba6f7;">setq</span> default-process-coding-system '(utf-8-unix . utf-8-unix))

  (global-set-key (kbd <span style="color: #a6e3a1;">"&lt;escape&gt;"</span>) 'keyboard-escape-quit) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">escape quits everything</span>


  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">Don't persist a custom file</span>
  (<span style="color: #cba6f7;">setq</span> custom-file (make-temp-file <span style="color: #a6e3a1;">""</span>)) <span style="color: #6c7086;">; </span><span style="color: #6c7086;">use a temp file as a placeholder</span>
  (<span style="color: #cba6f7;">setq</span> custom-safe-themes t)            <span style="color: #6c7086;">; </span><span style="color: #6c7086;">mark all themes as safe, since we can't persist now</span>
  (<span style="color: #cba6f7;">setq</span> enable-local-variables <span style="color: #f38ba8;">:all</span>)     <span style="color: #6c7086;">; </span><span style="color: #6c7086;">fix =defvar= warnings</span>

  (<span style="color: #cba6f7;">setq</span> delete-by-moving-to-trash t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">use trash-cli rather than rm when deleting files.</span>

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">less noise when compiling elisp</span>
  (<span style="color: #cba6f7;">setq</span> byte-compile-warnings '(not free-vars unresolved noruntime lexical make-local))
  (<span style="color: #cba6f7;">setq</span> native-comp-async-report-warnings-errors nil)
  (<span style="color: #cba6f7;">setq</span> load-prefer-newer t)

  (show-paren-mode t)

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">Hide commands in M-x which don't work in the current mode</span>
  (<span style="color: #cba6f7;">setq</span> read-extended-command-predicate #'command-completion-default-include-p))
</pre>
</div>
</div>
</div>
<div id="outline-container-org29822d2" class="outline-3">
<h3 id="org29822d2"><span class="section-number-3">4.3.</span> Browse url</h3>
<div class="outline-text-3" id="text-4-3">
<p>
I'm currently using <code>firefox-beta</code>, so I need to make sure that the built-in <code>browse-url</code> package knows about this. 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> browse-url
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> browse-url-firefox-program <span style="color: #a6e3a1;">"firefox-beta"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org004f44d" class="outline-3">
<h3 id="org004f44d"><span class="section-number-3">4.4.</span> Electric</h3>
<div class="outline-text-3" id="text-4-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> electric
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:init</span>
  (electric-pair-mode +1) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">automatically insert closing parens</span>
  (<span style="color: #cba6f7;">setq</span> electric-pair-preserve-balance nil)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">more annoying than useful</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0d5e6f0" class="outline-3">
<h3 id="org0d5e6f0"><span class="section-number-3">4.5.</span> Ediff</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li><a href="http://www.yummymelon.com/devnull/using-ediff-in-2023.html">nfdn: Using Ediff in 2023</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> ediff
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:ensure</span> nil
)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf5dd66d" class="outline-2">
<h2 id="orgf5dd66d"><span class="section-number-2">5.</span> Keybindings</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>Mnemonic keybindings with <code>SPC</code> as the leader key, inspired by spacemacs and doom emacs.</li>
<li>The local leader <code>,</code> is used for mode-specific bindings.</li>
</ul>
</div>
<div id="outline-container-org374c17b" class="outline-3">
<h3 id="org374c17b"><span class="section-number-3">5.1.</span> Evil</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li><a href="https://github.com/emacs-evil/evil">GitHub - emacs-evil/evil: The extensible vi layer for Emacs.</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> evil
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> evil-respect-visual-line-mode t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">respect visual lines</span>

  (<span style="color: #cba6f7;">setq</span> evil-search-module 'isearch) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">use emacs' built-in search functionality.</span>

  (<span style="color: #cba6f7;">setq</span> evil-want-C-u-scroll t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">allow scroll up with '</span><span style="color: #fab387;">C-u</span><span style="color: #6c7086;">'</span>
  (<span style="color: #cba6f7;">setq</span> evil-want-C-d-scroll t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">allow scroll down with '</span><span style="color: #fab387;">C-d</span><span style="color: #6c7086;">'</span>

  (<span style="color: #cba6f7;">setq</span> evil-want-integration t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">necessary for evil collection</span>
  (<span style="color: #cba6f7;">setq</span> evil-want-keybinding nil)

  (<span style="color: #cba6f7;">setq</span> evil-split-window-below t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">split windows created below</span>
  (<span style="color: #cba6f7;">setq</span> evil-vsplit-window-right t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">vertically split windows created to the right</span>

  (<span style="color: #cba6f7;">setq</span> evil-want-C-i-jump nil) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">hopefully this will fix weird tab behaviour</span>

  (<span style="color: #cba6f7;">setq</span> evil-undo-system 'undo-redo) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">undo via '</span><span style="color: #fab387;">u</span><span style="color: #6c7086;">', and redo the undone change via '</span><span style="color: #fab387;">C-r</span><span style="color: #6c7086;">'; only available in emacs 28+.</span>
  <span style="color: #f38ba8;">:config</span>
  (evil-mode t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">globally enable evil mode</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">set the initial state for some kinds of buffers.</span>
  (evil-set-initial-state 'messages-buffer-mode 'normal)
  (evil-set-initial-state 'dashboard-mode 'normal)
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">buffers in which I want to immediately start typing should be in '</span><span style="color: #fab387;">insert</span><span style="color: #6c7086;">' state by default.</span>
  (evil-set-initial-state 'eshell-mode 'insert)
  (evil-set-initial-state 'magit-diff-mode 'insert))
</pre>
</div>
</div>
<div id="outline-container-org1d19be2" class="outline-4">
<h4 id="org1d19be2"><span class="section-number-4">5.1.1.</span> Evil collection</h4>
<div class="outline-text-4" id="text-5-1-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> evil-collection <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">evilifies a bunch of things</span>
  <span style="color: #f38ba8;">:after</span> evil
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> evil-collection-outline-bind-tab-p t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">'</span><span style="color: #fab387;">&lt;TAB&gt;</span><span style="color: #6c7086;">' cycles visibility in '</span><span style="color: #fab387;">outline-minor-mode</span><span style="color: #6c7086;">'</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">If I want to incrementally enable evil-collection mode-by-mode, I can do something like the following:</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">(setq evil-collection-mode-list nil) ;; I don't like surprises</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">(add-to-list 'evil-collection-mode-list 'magit) ;; evilify magit</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">(add-to-list 'evil-collection-mode-list '(pdf pdf-view)) ;; evilify pdf-view</span>
  <span style="color: #f38ba8;">:config</span>
  (evil-collection-init))
</pre>
</div>
</div>
</div>
<div id="outline-container-org1b1c6d3" class="outline-4">
<h4 id="org1b1c6d3"><span class="section-number-4">5.1.2.</span> Evil commentary</h4>
<div class="outline-text-4" id="text-5-1-2">
<ul class="org-ul">
<li><a href="https://github.com/emacs-evil/evil-collection">GitHub - emacs-evil/evil-collection: A set of keybindings for evil-mode</a></li>
</ul>

<p>
Port of Tim Pope's commentary package
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> evil-commentary
  <span style="color: #f38ba8;">:after</span> evil
  <span style="color: #f38ba8;">:config</span>
  (evil-commentary-mode)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">globally enable evil-commentary</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org244138a" class="outline-4">
<h4 id="org244138a"><span class="section-number-4">5.1.3.</span> Evil surround</h4>
<div class="outline-text-4" id="text-5-1-3">
<ul class="org-ul">
<li><a href="https://github.com/emacs-evil/evil-surround">GitHub - emacs-evil/evil-surround: you will be surrounded (surround.vim for e&#x2026;</a></li>
</ul>

<p>
Port of Tim Pope's surround package
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> evil-surround
  <span style="color: #f38ba8;">:after</span> evil
  <span style="color: #f38ba8;">:config</span>
  (global-evil-surround-mode 1)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">globally enable evil-surround</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6a0152c" class="outline-4">
<h4 id="org6a0152c"><span class="section-number-4">5.1.4.</span> Evil goggles</h4>
<div class="outline-text-4" id="text-5-1-4">
<ul class="org-ul">
<li><a href="https://github.com/edkolev/evil-goggles">GitHub - edkolev/evil-goggles: Display visual hint on evil edit operations</a></li>
</ul>

<p>
Show visual hints for evil motions.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> evil-goggles
  <span style="color: #f38ba8;">:config</span>
  (evil-goggles-mode)

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">optionally use diff-mode's faces; as a result, deleted text</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">will be highlighed with `diff-removed` face which is typically</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">some red color (as defined by the color theme)</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">other faces such as `diff-added` will be used for other actions</span>
  (evil-goggles-use-diff-faces))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgcdc418b" class="outline-3">
<h3 id="orgcdc418b"><span class="section-number-3">5.2.</span> General</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li><p>
<a href="https://github.com/noctuid/general.el">GitHub - noctuid/general.el: More convenient key definitions in emacs</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> general
  <span style="color: #f38ba8;">:ensure</span> (<span style="color: #f38ba8;">:wait</span> t)
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:config</span>
  (general-evil-setup)
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">integrate general with evil</span>

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">set up '</span><span style="color: #fab387;">SPC</span><span style="color: #6c7086;">' as the global leader key</span>
  (<span style="color: #cba6f7;">general-create-definer</span> patrl/leader-keys
    <span style="color: #f38ba8;">:states</span> '(normal insert visual emacs)
    <span style="color: #f38ba8;">:keymaps</span> 'override
    <span style="color: #f38ba8;">:prefix</span> <span style="color: #a6e3a1;">"SPC"</span> <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">set leader</span>
    <span style="color: #f38ba8;">:global-prefix</span> <span style="color: #a6e3a1;">"M-SPC"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">access leader in insert mode</span>

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">set up ',' as the local leader key</span>
  (<span style="color: #cba6f7;">general-create-definer</span> patrl/local-leader-keys
    <span style="color: #f38ba8;">:states</span> '(normal insert visual emacs)
    <span style="color: #f38ba8;">:keymaps</span> 'override
    <span style="color: #f38ba8;">:prefix</span> <span style="color: #a6e3a1;">","</span> <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">set local leader</span>
    <span style="color: #f38ba8;">:global-prefix</span> <span style="color: #a6e3a1;">"M-,"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">access local leader in insert mode</span>

  (general-define-key
   <span style="color: #f38ba8;">:states</span> 'insert
   <span style="color: #a6e3a1;">"C-g"</span> 'evil-normal-state) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">don't stretch for ESC</span>

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">unbind some annoying default bindings</span>
  (<span style="color: #cba6f7;">general-unbind</span>
    <span style="color: #a6e3a1;">"C-x C-r"</span>   <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">unbind find file read only</span>
    <span style="color: #a6e3a1;">"C-x C-z"</span>   <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">unbind suspend frame</span>
    <span style="color: #a6e3a1;">"C-x C-d"</span>   <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">unbind list directory</span>
    <span style="color: #a6e3a1;">"&lt;mouse-2&gt;"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">pasting with mouse wheel click</span>


  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"SPC"</span> '(execute-extended-command <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"execute command"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">an alternative to '</span><span style="color: #fab387;">M-x</span><span style="color: #6c7086;">'</span>
    <span style="color: #a6e3a1;">"TAB"</span> '(<span style="color: #f38ba8;">:keymap</span> tab-prefix-map <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"tab"</span>)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">remap tab bindings</span>

  (<span style="color: #cba6f7;">patrl/leader-keys</span>
  <span style="color: #a6e3a1;">"w"</span> '(<span style="color: #f38ba8;">:keymap</span> evil-window-map <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"window"</span>)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">window bindings</span>

  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"c"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"code"</span>))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">help</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">namespace mostly used by '</span><span style="color: #fab387;">helpful</span><span style="color: #6c7086;">'</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"h"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"help"</span>))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">file</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"f"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"file"</span>)
    <span style="color: #a6e3a1;">"ff"</span> '(find-file <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"find file"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">gets overridden by consult</span>
    <span style="color: #a6e3a1;">"fs"</span> '(save-buffer <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"save file"</span>))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">buffer</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">see '</span><span style="color: #fab387;">bufler</span><span style="color: #6c7086;">' and '</span><span style="color: #fab387;">popper</span><span style="color: #6c7086;">'</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"b"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"buffer"</span>)
    <span style="color: #a6e3a1;">"bb"</span> '(switch-to-buffer <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"switch buffer"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">gets overridden by consult</span>
    <span style="color: #a6e3a1;">"bk"</span> '(kill-this-buffer <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"kill this buffer"</span>)
    <span style="color: #a6e3a1;">"br"</span> '(revert-buffer <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"reload buffer"</span>))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">bookmark</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"B"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"bookmark"</span>)
    <span style="color: #a6e3a1;">"Bs"</span> '(bookmark-set <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"set bookmark"</span>)
    <span style="color: #a6e3a1;">"Bj"</span> '(bookmark-jump <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"jump to bookmark"</span>))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">universal argument</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"u"</span> '(universal-argument <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"universal prefix"</span>))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">notes</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">see '</span><span style="color: #fab387;">citar</span><span style="color: #6c7086;">' and '</span><span style="color: #fab387;">org-roam</span><span style="color: #6c7086;">'</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"n"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"notes"</span>)
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">see org-roam and citar sections</span>
    <span style="color: #a6e3a1;">"na"</span> '(org-todo-list <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"agenda todos"</span>)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">agenda</span>

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">code</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">see '</span><span style="color: #fab387;">flymake</span><span style="color: #6c7086;">'</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"c"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"code"</span>))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">open</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"o"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"open"</span>)
    <span style="color: #a6e3a1;">"os"</span> '(speedbar t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"speedbar"</span>)
    <span style="color: #a6e3a1;">"op"</span> '(elpaca-log t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"elpaca"</span>))


  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">search</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">see '</span><span style="color: #fab387;">consult</span><span style="color: #6c7086;">'</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"s"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"search"</span>))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">templating</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">see '</span><span style="color: #fab387;">tempel</span><span style="color: #6c7086;">'</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"t"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"template"</span>)))

<span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"c" '(org-capture :wk "capture")))</span>
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-org2d7e242" class="outline-3">
<h3 id="org2d7e242"><span class="section-number-3">5.3.</span> Org mode</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Resources:
</p>
<ul class="org-ul">
<li><a href="https://zzamboni.org/post/beautifying-org-mode-in-emacs/">zzamboni.org | Beautifying Org Mode in Emacs</a></li>
<li><a href="https://lepisma.xyz/2017/10/28/ricing-org-mode/">Ricing up Org Mode</a></li>
<li><p>
<a href="https://github.com/minad/org-modern">GitHub - minad/org-modern: Modern Org Style</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> org
  <span style="color: #f38ba8;">:ensure</span> (<span style="color: #f38ba8;">:wait</span> t)
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:init</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">edit settings (recommended by org-modern)</span>
  (<span style="color: #cba6f7;">setq</span> org-auto-align-tags nil
            org-tags-column 0
            org-catch-invisible-edits 'show-and-error
            org-special-ctrl-a/e t <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">special navigation behaviour in headlines</span>
            org-insert-heading-respect-content t)

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">styling, hide markup, etc. (recommended by org-modern)</span>
  (<span style="color: #cba6f7;">setq</span> org-hide-emphasis-markers t
            org-src-fontify-natively t <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">fontify source blocks natively</span>
            org-highlight-latex-and-related '(native) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">fontify latex blocks natively</span>
            org-pretty-entities t)

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">agenda styling (recommended by org-modern)</span>
  (<span style="color: #cba6f7;">setq</span> org-agenda-tags-column 0
            org-agenda-block-separator ?&#9472;
            org-agenda-time-grid
            '((daily today require-timed)
              (800 1000 1200 1400 1600 1800 2000)
              <span style="color: #a6e3a1;">" &#9476;&#9476;&#9476;&#9476;&#9476; "</span> <span style="color: #a6e3a1;">"&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;&#9476;"</span>)
            org-agenda-current-time-string
            <span style="color: #a6e3a1;">"&#11104; now &#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;"</span>)

  (<span style="color: #cba6f7;">setq</span> org-ellipsis <span style="color: #a6e3a1;">"..."</span>)

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">todo setup</span>
  (<span style="color: #cba6f7;">setq</span> org-todo-keywords
            <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">it's extremely useful to distinguish between short-term goals and long-term projects</span>
            '((sequence <span style="color: #a6e3a1;">"TODO(t)"</span> <span style="color: #a6e3a1;">"SOMEDAY(s)"</span> <span style="color: #a6e3a1;">"|"</span> <span style="color: #a6e3a1;">"DONE(d)"</span>)
              (sequence <span style="color: #a6e3a1;">"TO-READ(r)"</span> <span style="color: #a6e3a1;">"READING(R)"</span> <span style="color: #a6e3a1;">"|"</span> <span style="color: #a6e3a1;">"HAVE-READ(d)"</span>)
              (sequence <span style="color: #a6e3a1;">"PROJ(p)"</span> <span style="color: #a6e3a1;">"|"</span> <span style="color: #a6e3a1;">"COMPLETED(c)"</span>)))


  (<span style="color: #cba6f7;">setq</span> org-adapt-indentation nil) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">interacts poorly with '</span><span style="color: #fab387;">evil-open-below</span><span style="color: #6c7086;">'</span>

  <span style="color: #f38ba8;">:custom</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">(org-agenda-files '((concat patrl/notes-path "todo.org") (concat patrl/notes-path "teaching.org") (concat patrl/notes-path "projects.org")))</span>
  (org-cite-global-bibliography (list patrl/global-bib-file))
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">handle citations using citar</span>
  (org-cite-insert-processor 'citar)
  (org-cite-follow-processor 'citar)
  (org-cite-activate-processor 'citar)
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/local-leader-keys</span>
        <span style="color: #f38ba8;">:keymaps</span> 'org-mode-map
        <span style="color: #a6e3a1;">"a"</span> '(org-archive-subtree <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"archive"</span>)
        <span style="color: #a6e3a1;">"c"</span> '(org-cite-insert <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"insert citation"</span>)
        <span style="color: #a6e3a1;">"l"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"link"</span>)
        <span style="color: #a6e3a1;">"ll"</span> '(org-insert-link t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"link"</span>)
        <span style="color: #a6e3a1;">"lp"</span> '(org-latex-preview t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"prev latex"</span>)
        <span style="color: #a6e3a1;">"h"</span> '(consult-org-heading <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult heading"</span>)
        <span style="color: #a6e3a1;">"d"</span> '(org-cut-special <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"org cut special"</span>)
        <span style="color: #a6e3a1;">"y"</span> '(org-copy-special <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"org copy special"</span>)
        <span style="color: #a6e3a1;">"p"</span> '(org-paste-special <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"org paste special"</span>)
        <span style="color: #a6e3a1;">"b"</span> '(<span style="color: #f38ba8;">:keymap</span> org-babel-map <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"babel"</span>)
        <span style="color: #a6e3a1;">"t"</span> '(org-todo <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"todo"</span>)
        <span style="color: #a6e3a1;">"s"</span> '(org-insert-structure-template <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"template"</span>)
        <span style="color: #a6e3a1;">"e"</span> '(org-edit-special <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"edit"</span>)
        <span style="color: #a6e3a1;">"i"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"insert"</span>)
        <span style="color: #a6e3a1;">"ih"</span> '(org-insert-heading <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"insert heading"</span>)
        <span style="color: #a6e3a1;">"is"</span> '(org-insert-subheading <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"insert heading"</span>)
        <span style="color: #a6e3a1;">"f"</span> '(org-footnote-action <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"footnote action"</span>)
        <span style="color: #a6e3a1;">"&gt;"</span> '(org-demote-subtree <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"demote subtree"</span>)
        <span style="color: #a6e3a1;">"&lt;"</span> '(org-promote-subtree <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"demote subtree"</span>))
  (<span style="color: #f38ba8;">:keymaps</span> 'org-agenda-mode-map
                <span style="color: #a6e3a1;">"j"</span> '(org-agenda-next-line)
                <span style="color: #a6e3a1;">"h"</span> '(org-agenda-previous-line))

  <span style="color: #f38ba8;">:hook</span>
  (org-mode . olivetti-mode)
  (org-mode . variable-pitch-mode)
  (org-mode . (<span style="color: #cba6f7;">lambda</span> () (electric-indent-local-mode -1))) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">disable electric indentation</span>

  <span style="color: #f38ba8;">:config</span>
  (set-face-attribute 'org-ellipsis nil <span style="color: #f38ba8;">:inherit</span> 'default <span style="color: #f38ba8;">:box</span> nil)
  (add-to-list 'org-latex-packages-alist '(<span style="color: #a6e3a1;">""</span> <span style="color: #a6e3a1;">"braket"</span> t))
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((js . t)
         (emacs-lisp . t)
         (awk . t)))
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">set up org paths</span>
  (<span style="color: #cba6f7;">setq</span> org-directory <span style="color: #a6e3a1;">"~/MEGA/org/agenda"</span>)
  (<span style="color: #cba6f7;">setq</span> org-default-notes-file (concat org-directory <span style="color: #a6e3a1;">"/notes.org"</span>)))
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-org51be791" class="outline-3">
<h3 id="org51be791"><span class="section-number-3">5.4.</span> Avy</h3>
<div class="outline-text-3" id="text-5-4">
<ul class="org-ul">
<li><a href="https://github.com/abo-abo/avy">GitHub - abo-abo/avy: Jump to things in Emacs tree-style</a></li>
<li><a href="https://karthinks.com/software/avy-can-do-anything/">Avy can do anything | Karthinks</a></li>
</ul>

<p>
Super-charged navigation.
</p>

<p>
Use <code>.</code> after an avy command to trigger <code>embark-act</code> on the selected candidate.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #cba6f7;">use-package</span> avy
    <span style="color: #f38ba8;">:demand</span> t
    <span style="color: #f38ba8;">:init</span>
(<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">patrl/avy-action-insert-newline</span> (pt)
      (<span style="color: #cba6f7;">save-excursion</span>
        (goto-char pt)
        (newline))
      (select-window
       (cdr
        (ring-ref avy-ring 0))))
    (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">patrl/avy-action-kill-whole-line</span> (pt)
      (<span style="color: #cba6f7;">save-excursion</span>
        (goto-char pt)
        (kill-whole-line))
      (select-window
       (cdr
        (ring-ref avy-ring 0))))
    (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">patrl/avy-action-embark</span> (pt)
      (<span style="color: #cba6f7;">unwind-protect</span>
          (<span style="color: #cba6f7;">save-excursion</span>
            (goto-char pt)
            (embark-act))
        (select-window
         (cdr (ring-ref avy-ring 0))))
      t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">adds an avy action for embark</span>
    <span style="color: #f38ba8;">:general</span>
    (<span style="color: #cba6f7;">general-def</span> '(normal motion)
      <span style="color: #a6e3a1;">"s"</span> 'evil-avy-goto-char-timer
      <span style="color: #a6e3a1;">"f"</span> 'evil-avy-goto-char-in-line
      <span style="color: #a6e3a1;">"gl"</span> 'evil-avy-goto-line <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">this rules</span>
      <span style="color: #a6e3a1;">";"</span> 'avy-resume)
    <span style="color: #f38ba8;">:config</span>
    (<span style="color: #cba6f7;">setf</span> (alist-get ?. avy-dispatch-alist) 'patrl/avy-action-embark <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">embark integration</span>
          (alist-get ?i avy-dispatch-alist) 'patrl/avy-action-insert-newline
          (alist-get ?K avy-dispatch-alist) 'patrl/avy-action-kill-whole-line)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">kill lines with avy</span>
</pre>
</div>
</div>
<div id="outline-container-org0015707" class="outline-4">
<h4 id="org0015707"><span class="section-number-4">5.4.1.</span> Link hint</h4>
<div class="outline-text-4" id="text-5-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> link-hint
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"l"</span> '(link-hint-open-link <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"open link"</span>))
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> browse-url-browser-function 'browse-url-firefox)
  (<span style="color: #cba6f7;">setq</span> link-hint-avy-style 'pre))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org67e222a" class="outline-3">
<h3 id="org67e222a"><span class="section-number-3">5.5.</span> Which key</h3>
<div class="outline-text-3" id="text-5-5">
<ul class="org-ul">
<li><a href="https://github.com/justbur/emacs-which-key">GitHub - justbur/emacs-which-key: Emacs package that displays available keybi&#x2026;</a></li>
</ul>

<p>
Display key bindings.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> which-key
  <span style="color: #f38ba8;">:after</span> evil
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:init</span> (which-key-mode)
  <span style="color: #f38ba8;">:config</span>
  (which-key-setup-minibuffer))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4a48157" class="outline-2">
<h2 id="org4a48157"><span class="section-number-2">6.</span> Appearance</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orga0210a0" class="outline-3">
<h3 id="orga0210a0"><span class="section-number-3">6.1.</span> Mode line</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li><a href="https://gitlab.com/jessieh/mood-line">Jessie Hildebrandt / mood-line · GitLab</a></li>
</ul>

<p>
Minimal mode line.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> mood-line
  <span style="color: #f38ba8;">:disabled</span>
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:config</span> (mood-line-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org313b413" class="outline-3">
<h3 id="org313b413"><span class="section-number-3">6.2.</span> Minions</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> minions
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:config</span>
  (minions-mode 1))
</pre>
</div>
</div>
</div>
<div id="outline-container-org11865ff" class="outline-3">
<h3 id="org11865ff"><span class="section-number-3">6.3.</span> Icons</h3>
<div class="outline-text-3" id="text-6-3">
<ul class="org-ul">
<li><a href="https://github.com/domtronn/all-the-icons.el">GitHub - domtronn/all-the-icons.el: A utility package to collect various Icon&#x2026;</a></li>
<li><a href="https://github.com/jtbm37/all-the-icons-dired">GitHub - jtbm37/all-the-icons-dired: Adds dired support to all-the-icons</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> all-the-icons
  <span style="color: #f38ba8;">:demand</span> t)


<span style="color: #6c7086;">;; </span><span style="color: #6c7086;">prettify dired with icons</span>
(<span style="color: #cba6f7;">use-package</span> all-the-icons-dired
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:hook</span>
  (dired-mode . all-the-icons-dired-mode))

(<span style="color: #cba6f7;">use-package</span> all-the-icons-completion
  <span style="color: #f38ba8;">:after</span> (marginalia all-the-icons)
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:hook</span> (marginalia-mode . all-the-icons-completion-marginalia-setup)
  <span style="color: #f38ba8;">:init</span> (all-the-icons-completion-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org88f8a3a" class="outline-3">
<h3 id="org88f8a3a"><span class="section-number-3">6.4.</span> Olivetti</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Add some margins (useful for writing prose).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> olivetti
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> olivetti-body-width 80)
  (<span style="color: #cba6f7;">setq</span> olivetti-style 'fancy)
  (<span style="color: #cba6f7;">setq</span> olivetti-minimum-body-width 50))

</pre>
</div>
</div>
</div>
<div id="outline-container-org2ac9340" class="outline-3">
<h3 id="org2ac9340"><span class="section-number-3">6.5.</span> Fonts</h3>
<div class="outline-text-3" id="text-6-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">patrl/setup-font-wolfe</span> ()
    (set-face-attribute 'default nil <span style="color: #f38ba8;">:font</span> (font-spec <span style="color: #f38ba8;">:family</span> <span style="color: #a6e3a1;">"Iosevka Comfy Motion"</span> <span style="color: #f38ba8;">:size</span> 10.0 <span style="color: #f38ba8;">:weight</span> 'regular))
    (set-face-attribute 'fixed-pitch nil <span style="color: #f38ba8;">:font</span> (font-spec <span style="color: #f38ba8;">:family</span> <span style="color: #a6e3a1;">"Iosevka Comfy Motion"</span> <span style="color: #f38ba8;">:size</span> 10.0 <span style="color: #f38ba8;">:weight</span> 'regular))
    (set-face-attribute 'variable-pitch nil <span style="color: #f38ba8;">:font</span> (font-spec <span style="color: #f38ba8;">:family</span> <span style="color: #a6e3a1;">"Iosevka Etoile"</span> <span style="color: #f38ba8;">:size</span> 10.0 <span style="color: #f38ba8;">:weight</span> 'medium))
    (set-fontset-font t 'unicode <span style="color: #a6e3a1;">"JuliaMono"</span>))

(<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">patrl/setup-font-vivacia</span> ()
  (set-face-attribute 'default nil <span style="color: #f38ba8;">:font</span> (font-spec <span style="color: #f38ba8;">:family</span> <span style="color: #a6e3a1;">"Iosevka Comfy Motion"</span> <span style="color: #f38ba8;">:size</span> 10.0 <span style="color: #f38ba8;">:weight</span> 'regular))
  (set-face-attribute 'fixed-pitch nil <span style="color: #f38ba8;">:font</span> (font-spec <span style="color: #f38ba8;">:family</span> <span style="color: #a6e3a1;">"Iosevka Comfy Motion"</span> <span style="color: #f38ba8;">:size</span> 10.0 <span style="color: #f38ba8;">:weight</span> 'regular))
  (set-face-attribute 'variable-pitch nil <span style="color: #f38ba8;">:font</span> (font-spec <span style="color: #f38ba8;">:family</span> <span style="color: #a6e3a1;">"Iosevka Etoile"</span> <span style="color: #f38ba8;">:size</span> 10.0 <span style="color: #f38ba8;">:weight</span> 'medium))
  (set-fontset-font t 'unicode <span style="color: #a6e3a1;">"JuliaMono"</span>))

(<span style="color: #cba6f7;">when</span> (string= (system-name) <span style="color: #a6e3a1;">"wolfe"</span>)
  (add-hook 'after-init-hook 'patrl/setup-font-wolfe)
  (add-hook 'server-after-make-frame-hook 'patrl/setup-font-wolfe))

(<span style="color: #cba6f7;">when</span> (string= (system-name) <span style="color: #a6e3a1;">"vivacia"</span>)
  (add-hook 'after-init-hook 'patrl/setup-font-vivacia)
  (add-hook 'server-after-make-frame-hook 'patrl/setup-font-vivacia))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb31a3dd" class="outline-3">
<h3 id="orgb31a3dd"><span class="section-number-3">6.6.</span> Themes</h3>
<div class="outline-text-3" id="text-6-6">
<p>
Visually distinguish between 'real' buffers and everything else.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> solaire-mode
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:config</span>
  (solaire-global-mode +1))
</pre>
</div>

<p>
Some nice themes:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> catppuccin-theme
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> catppuccin-height-title1 1.5)
  (load-theme 'catppuccin t))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> doom-themes
  <span style="color: #f38ba8;">:config</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">Global settings (defaults)</span>
  (<span style="color: #cba6f7;">setq</span> doom-themes-enable-bold t <span style="color: #6c7086;">; </span><span style="color: #6c7086;">if nil, bold is universally disabled</span>
        doom-themes-enable-italic t)
                                        <span style="color: #6c7086;">; </span><span style="color: #6c7086;">if nil, italics is universally disabled</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">(load-theme 'doom-nord t)</span>

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">Enable flashing mode-line on errors</span>
  (doom-themes-visual-bell-config)
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">Corrects (and improves) org-mode's native fontification.</span>
  (doom-themes-org-config))
</pre>
</div>

<p>
Visually highlight todo.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> hl-todo
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:init</span>
  (global-hl-todo-mode))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb7721a9" class="outline-2">
<h2 id="orgb7721a9"><span class="section-number-2">7.</span> Organization</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org51d64c9" class="outline-3">
<h3 id="org51d64c9"><span class="section-number-3">7.1.</span> Buffer management</h3>
<div class="outline-text-3" id="text-7-1">
</div>
<div id="outline-container-org9e08ecf" class="outline-4">
<h4 id="org9e08ecf"><span class="section-number-4">7.1.1.</span> <code>Popper</code></h4>
<div class="outline-text-4" id="text-7-1-1">
<ul class="org-ul">
<li><a href="https://github.com/karthink/popper">GitHub - karthink/popper: Emacs minor-mode to summon and dismiss buffers easily.</a></li>
</ul>

<p>
Classify certain buffer types as popups.
</p>

<p>
Not sure if I want to keep this around.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> popper
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
        <span style="color: #a6e3a1;">"bp"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"popper"</span>)
        <span style="color: #a6e3a1;">"bpc"</span> '(popper-cycle t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"cycle"</span>)
        <span style="color: #a6e3a1;">"bpt"</span> '(popper-toggle-latest t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"toggle latest"</span>)
        <span style="color: #a6e3a1;">"bpb"</span> '(popper-toggle-type t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"toggle type"</span>)
        <span style="color: #a6e3a1;">"bpk"</span> '(popper-kill-latest-popup t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"kill latest"</span>))
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> popper-reference-buffers
        '(<span style="color: #a6e3a1;">"\\*Messages\\*"</span>
          <span style="color: #a6e3a1;">"Output\\*$"</span>
          <span style="color: #a6e3a1;">"\\*helpful"</span>
          <span style="color: #a6e3a1;">"\\*Async Shell Command\\*"</span>
          help-mode
          compilation-mode
          magit-process-mode
          <span style="color: #a6e3a1;">"^\\*eshell.*\\*"</span> eshell-mode
          <span style="color: #a6e3a1;">"\\*direnv\\*"</span>
          <span style="color: #a6e3a1;">"\\*elfeed-log\\*"</span>
          <span style="color: #a6e3a1;">"\\*Async-native-compile-log\\*"</span>
          <span style="color: #a6e3a1;">"\\*TeX Help\\*"</span>
          <span style="color: #a6e3a1;">"\\*Embark Collect Live\\*"</span>))
  (popper-mode +1)
  (popper-echo-mode +1))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb22762d" class="outline-4">
<h4 id="orgb22762d"><span class="section-number-4">7.1.2.</span> <code>bufler</code></h4>
<div class="outline-text-4" id="text-7-1-2">
<ul class="org-ul">
<li><a href="https://github.com/alphapapa/bufler.el">GitHub - alphapapa/bufler.el: A butler for your buffers. Group buffers into w&#x2026;</a></li>
</ul>

<p>
This has been quite nice so far.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> bufler
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:custom</span>
  (bufler-workspace-mode t)
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">(bufler-workspace-tabs-mode t)</span>
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"bB"</span> '(bufler <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"bufler"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">overrides consult</span>
    <span style="color: #a6e3a1;">"bf"</span> '(bufler-workspace-frame-set <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"bufler workspace frame set"</span>)
    <span style="color: #a6e3a1;">"bl"</span> '(bufler-list <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"bufler list"</span>))
  (<span style="color: #f38ba8;">:keymaps</span> 'bufler-list-mode-map
            <span style="color: #f38ba8;">:states</span> 'normal
            <span style="color: #a6e3a1;">"?"</span> 'hydra:bufler/body
            <span style="color: #a6e3a1;">"RET"</span> 'bufler-list-buffer-switch
            <span style="color: #a6e3a1;">"SPC"</span> 'bufler-list-buffer-peek
            <span style="color: #a6e3a1;">"d"</span> 'bufler-list-buffer-kill))
</pre>
</div>
</div>
</div>
<div id="outline-container-org84eb2fb" class="outline-4">
<h4 id="org84eb2fb"><span class="section-number-4">7.1.3.</span> Projects</h4>
<div class="outline-text-4" id="text-7-1-3">
<p>
Use built in <code>project.el</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> project
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:general</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">assign built-in project.el bindings a new prefix</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span> <span style="color: #a6e3a1;">"p"</span> '(<span style="color: #f38ba8;">:keymap</span> project-prefix-map <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"project"</span>)))
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org4f200de"></a>File management<br />
<div class="outline-text-5" id="text-7-1-3-1">
<p>
Use built-in <code>dired</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #cba6f7;">use-package</span> dired
    <span style="color: #f38ba8;">:ensure</span> nil
    <span style="color: #f38ba8;">:general</span>
    (<span style="color: #cba6f7;">patrl/leader-keys</span>
      <span style="color: #a6e3a1;">"fd"</span> '(dired <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"dired"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">open dired (in a directory)</span>
      <span style="color: #a6e3a1;">"fj"</span> '(dired-jump <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"dired jump"</span>)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">open direct in the current directory</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">ranger like navigation</span>
    (<span style="color: #f38ba8;">:keymaps</span> 'dired-mode-map
              <span style="color: #f38ba8;">:states</span> 'normal
              <span style="color: #a6e3a1;">"h"</span> 'dired-up-directory
              <span style="color: #a6e3a1;">"q"</span> 'kill-current-buffer
              <span style="color: #a6e3a1;">"l"</span> 'dired-find-file)
    <span style="color: #f38ba8;">:hook</span>
    (dired-mode . dired-hide-details-mode))

  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">toggle subtree visibility with '</span><span style="color: #fab387;">TAB</span><span style="color: #6c7086;">'</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">makes dired a much more pleasant file manager</span>
(<span style="color: #cba6f7;">use-package</span> dired-subtree
  <span style="color: #f38ba8;">:demand</span> t)
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org67e9591" class="outline-2">
<h2 id="org67e9591"><span class="section-number-2">8.</span> Languages</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-org16230d7" class="outline-3">
<h3 id="org16230d7"><span class="section-number-3">8.1.</span> Lua</h3>
<div class="outline-text-3" id="text-8-1">
<ul class="org-ul">
<li><a href="http://immerrr.github.io/lua-mode/">Lua-mode</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> lua-mode
  <span style="color: #f38ba8;">:mode</span> <span style="color: #a6e3a1;">"\\.lua\\'"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orge72653a" class="outline-3">
<h3 id="orge72653a"><span class="section-number-3">8.2.</span> Lisp</h3>
<div class="outline-text-3" id="text-8-2">
</div>
<div id="outline-container-org4cd12df" class="outline-4">
<h4 id="org4cd12df"><span class="section-number-4">8.2.1.</span> Sly</h4>
<div class="outline-text-4" id="text-8-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #6c7086;">;; </span><span style="color: #6c7086;">FIXME - compatibility with corfu</span>
(<span style="color: #cba6f7;">use-package</span> sly)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb194b73" class="outline-4">
<h4 id="orgb194b73"><span class="section-number-4">8.2.2.</span> lispy</h4>
<div class="outline-text-4" id="text-8-2-2">
<ul class="org-ul">
<li><a href="https://github.com/abo-abo/lispy">GitHub - abo-abo/lispy: Short and sweet LISP editing</a></li>
<li><a href="https://github.com/noctuid/lispyville">GitHub - noctuid/lispyville: lispy + evil = lispyville</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> lispy
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #f38ba8;">:keymaps</span> 'lispy-mode-map
              <span style="color: #a6e3a1;">"TAB"</span> 'indent-for-tab-command) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">necessary for '</span><span style="color: #fab387;">corfu</span><span style="color: #6c7086;">'</span>
  <span style="color: #f38ba8;">:hook</span>
  (reb-lisp-mode . lispy-mode)
  (emacs-lisp-mode . lispy-mode)
  (racket-mode . lispy-mode)
  (fennel-mode . lispy-mode))

(<span style="color: #cba6f7;">use-package</span> lispyville
  <span style="color: #f38ba8;">:hook</span> (lispy-mode . lispyville-mode)
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #f38ba8;">:keymaps</span> 'lispyville-mode-map
              <span style="color: #a6e3a1;">"TAB"</span> 'indent-for-tab-command) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">necessary for '</span><span style="color: #fab387;">corfu</span><span style="color: #6c7086;">'</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">the following is necessary to retain tab completion in lispy mode</span>
  <span style="color: #f38ba8;">:config</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">TODO play around with keythemes</span>
  (lispyville-set-key-theme '(operators c-w additional)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org42cb6f2" class="outline-3">
<h3 id="org42cb6f2"><span class="section-number-3">8.3.</span> js</h3>
<div class="outline-text-3" id="text-8-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> js2-mode)
</pre>
</div>
</div>
</div>
<div id="outline-container-org5e4de31" class="outline-3">
<h3 id="org5e4de31"><span class="section-number-3">8.4.</span> Rust</h3>
<div class="outline-text-3" id="text-8-4">
<p>
We'll use <code>rust-analyzer</code> by using <code>rustic</code> with eglot.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> rustic
  <span style="color: #f38ba8;">:mode</span> (<span style="color: #a6e3a1;">"\\.rs\\'"</span> . rustic-mode)
  <span style="color: #f38ba8;">:config</span> (<span style="color: #cba6f7;">setq</span> rustic-lsp-client 'eglot))
</pre>
</div>
</div>
</div>
<div id="outline-container-org42ab475" class="outline-3">
<h3 id="org42ab475"><span class="section-number-3">8.5.</span> <span class="todo TODO">TODO</span> haskell</h3>
<div class="outline-text-3" id="text-8-5">
<ul class="org-ul">
<li>Setup LSP</li>
<li><p>
Haskell's indentation mode is interacting poorly with tab completion.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> haskell-mode)
</pre>
</div></li>
</ul>

<p>
<code>dante</code> (which leads on <code>ghcid</code>) can be useful when <code>haskell-language-server</code> isn't available in the local environment for whatever reason.
</p>

<p>
Note that the following uses <a href="#orgef2ed63">11.5.1</a> to convert dante's company backend to to a capf.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> dante
  <span style="color: #f38ba8;">:after</span> haskell-mode cape
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">dante-setup-capf</span> ()
    (add-to-list 'completion-at-point-functions (cape-company-to-capf #'dante-company)))
  <span style="color: #f38ba8;">:commands</span> 'dante-mode
  <span style="color: #f38ba8;">:config</span> (dante-setup-capf))
</pre>
</div>
</div>
</div>
<div id="outline-container-org3432244" class="outline-3">
<h3 id="org3432244"><span class="section-number-3">8.6.</span> racket</h3>
<div class="outline-text-3" id="text-8-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> racket-mode
  <span style="color: #f38ba8;">:hook</span> (racket-mode . racket-xp-mode) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">n.b. this requires Dr. Racket to be installed as a backend</span>
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/local-leader-keys</span>
    <span style="color: #f38ba8;">:keymaps</span> 'racket-mode-map
    <span style="color: #a6e3a1;">"r"</span> '(racket-run-and-switch-to-repl <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"run"</span>)
    <span style="color: #a6e3a1;">"e"</span> '(racket-eval-last-sexp <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"eval last sexp"</span>)
    <span style="color: #f38ba8;">:keymaps</span> 'racket-xp-mode-map
    <span style="color: #a6e3a1;">"xr"</span> '(racket-xp-rename <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"rename"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org7e40527" class="outline-3">
<h3 id="org7e40527"><span class="section-number-3">8.7.</span> nix</h3>
<div class="outline-text-3" id="text-8-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> nix-mode
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">There's no `nix-mode-map`, so not currently possible to set local bindings.</span>
  <span style="color: #f38ba8;">:mode</span> <span style="color: #a6e3a1;">"\\.nix\\'"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org272787e" class="outline-3">
<h3 id="org272787e"><span class="section-number-3">8.8.</span> markdown</h3>
<div class="outline-text-3" id="text-8-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> markdown-mode
  <span style="color: #f38ba8;">:hook</span> ((markdown-mode . visual-line-mode)
         (markdown-mode . olivetti-mode))
         (markdown-mode . variable-pitch-mode)
  <span style="color: #f38ba8;">:commands</span> (markdown-mode gfm-mode)
  <span style="color: #f38ba8;">:mode</span> ((<span style="color: #a6e3a1;">"README\\.md\\'"</span> . gfm-mode)
         (<span style="color: #a6e3a1;">"\\.md\\'"</span> . markdown-mode)
         (<span style="color: #a6e3a1;">"\\.markdown\\'"</span> . markdown-mode))
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> markdown-command <span style="color: #a6e3a1;">"pandoc"</span>)
  (<span style="color: #cba6f7;">setq</span> markdown-header-scaling t))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> pandoc-mode
  <span style="color: #f38ba8;">:after</span> markdown-mode
  <span style="color: #f38ba8;">:hook</span> (markdown-mode . pandoc-mode))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0cb46b9" class="outline-2">
<h2 id="org0cb46b9"><span class="section-number-2">9.</span> Latex</h2>
<div class="outline-text-2" id="text-9">
<p>
Useful resources:
</p>

<ul class="org-ul">
<li><a href="https://github.com/daviwil/emacs-from-scratch/wiki/LaTeX-config-(AucteX)-in-Emacs-from-scratch">LaTeX config (AucteX) in Emacs from scratch · daviwil/emacs-from-scratch Wiki&#x2026;</a></li>
</ul>

<p>
Configuring <code>auctex</code> is a little like dealing with a teetering stack of plates.
</p>

<p>
Bindings:
</p>

<ul class="org-ul">
<li><code>n b</code>: insert citation via citar (normal mode).</li>
<li><code>, p</code>: preview at point.</li>
<li><code>, c</code>: compile.</li>
</ul>

<p>
Auto-activating snippets:
</p>

<ul class="org-ul">
<li><code>mx</code>: insert in-line equation.</li>
<li><code>mq</code>: insert equation.</li>
<li><code>ii</code>: insert itemize environment.</li>
<li><code>forfor</code>: insert forest environment.</li>
<li><code>*i</code>: insert italicized environment.</li>
<li><code>*b</code>: insert bold environment.</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> tex 
  <span style="color: #f38ba8;">:ensure</span> (auctex <span style="color: #f38ba8;">:pre-build</span> ((<span style="color: #a6e3a1;">"./autogen.sh"</span>)
                              (<span style="color: #a6e3a1;">"./configure"</span>
                               <span style="color: #a6e3a1;">"--without-texmf-dir"</span>
                               <span style="color: #a6e3a1;">"--with-packagelispdir=./"</span>
                               <span style="color: #a6e3a1;">"--with-packagedatadir=./"</span>)
                              (<span style="color: #a6e3a1;">"make"</span>))
                  <span style="color: #f38ba8;">:build</span> (<span style="color: #f38ba8;">:not</span> elpaca--compile-info) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">Make will take care of this step</span>
                  <span style="color: #f38ba8;">:files</span> (<span style="color: #a6e3a1;">"*.el"</span> <span style="color: #a6e3a1;">"doc/*.info*"</span> <span style="color: #a6e3a1;">"etc"</span> <span style="color: #a6e3a1;">"images"</span> <span style="color: #a6e3a1;">"latex"</span> <span style="color: #a6e3a1;">"style"</span>)
                  <span style="color: #f38ba8;">:version</span> (<span style="color: #cba6f7;">lambda</span> (_) (<span style="color: #cba6f7;">require</span> '<span style="color: #fab387;">tex-site</span>) AUCTeX-version))
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> TeX-parse-self t <span style="color: #6c7086;">; </span><span style="color: #6c7086;">parse on load</span>
        reftex-plug-into-AUCTeX t
        TeX-auto-save t  <span style="color: #6c7086;">; </span><span style="color: #6c7086;">parse on save</span>
        TeX-view-program-selection '((output-pdf <span style="color: #a6e3a1;">"PDF Tools"</span>))
        TeX-source-correlate-mode t
        TeX-source-correlate-method 'synctex
        TeX-source-correlate-start-server t
        TeX-electric-sub-and-superscript t
        TeX-engine 'luatex <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">use lualatex by default</span>
        TeX-save-query nil
        TeX-electric-math (cons <span style="color: #a6e3a1;">"</span><span style="color: #f38ba8;">\\</span><span style="color: #f38ba8;">(</span><span style="color: #a6e3a1;">"</span> <span style="color: #a6e3a1;">"</span><span style="color: #f38ba8;">\\</span><span style="color: #f38ba8;">)</span><span style="color: #a6e3a1;">"</span>)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">'</span><span style="color: #fab387;">$</span><span style="color: #6c7086;">' inserts an in-line equation '</span><span style="color: #fab387;">\(...\)</span><span style="color: #6c7086;">'</span>

  (add-hook 'TeX-mode-hook #'reftex-mode)
  (add-hook 'TeX-mode-hook #'olivetti-mode)
  (add-hook 'TeX-mode-hook #'turn-on-auto-fill)
  (add-hook 'TeX-mode-hook #'prettify-symbols-mode)
  (add-hook 'TeX-after-compilation-finished-functions
            #'TeX-revert-document-buffer)
  (add-hook 'TeX-mode-hook #'outline-minor-mode)
  <span style="color: #f38ba8;">:general</span> 
  (<span style="color: #cba6f7;">patrl/local-leader-keys</span>
    <span style="color: #f38ba8;">:keymaps</span> 'LaTeX-mode-map
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"TAB" 'TeX-complete-symbol ;; FIXME let's '</span><span style="color: #fab387;">TAB</span><span style="color: #6c7086;">' do autocompletion (but it's kind of useless to be honest)</span>
    <span style="color: #a6e3a1;">"="</span> '(reftex-toc <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"reftex toc"</span>)
    <span style="color: #a6e3a1;">"("</span> '(reftex-latex <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"reftex label"</span>)
    <span style="color: #a6e3a1;">")"</span> '(reftex-reference <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"reftex ref"</span>)
    <span style="color: #a6e3a1;">"m"</span> '(LaTeX-macro <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"insert macro"</span>)
    <span style="color: #a6e3a1;">"s"</span> '(LaTeX-section <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"insert section header"</span>)
    <span style="color: #a6e3a1;">"e"</span> '(LaTeX-environment <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"insert environment"</span>)
    <span style="color: #a6e3a1;">"p"</span> '(preview-at-point <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"preview at point"</span>)
    <span style="color: #a6e3a1;">"f"</span> '(TeX-font <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"font"</span>)
    <span style="color: #a6e3a1;">"c"</span> '(TeX-command-run-all <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"compile"</span>)))

</pre>
</div>

<p>
<code>evil-tex</code> is a crucial component in my workflow. <code>evil-surround</code> integration makes things a breeze. Some examples:
</p>

<ul class="org-ul">
<li>Italicize word from point in normal mode: <code>ysw;i</code>.</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> evil-tex
  <span style="color: #f38ba8;">:hook</span> (LaTeX-mode . evil-tex-mode)
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #f38ba8;">:keymaps</span> 'evil-tex-mode-map
            <span style="color: #a6e3a1;">"M-]"</span> 'evil-tex-brace-movement)
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">unbind-key</span> <span style="color: #a6e3a1;">"M-n"</span> 'evil-tex-mode-map)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">interfering with jinx</span>
</pre>
</div>

<p>
Set up icon support using the following instructions:
</p>

<ul class="org-ul">
<li><a href="https://github.com/emacs-citar/citar/wiki/Indicators">Indicators · emacs-citar/citar Wiki · GitHub</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> citar
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:after</span> all-the-icons
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">citar-indicator-files-icons</span>
    (citar-indicator-create
     <span style="color: #f38ba8;">:symbol</span> (all-the-icons-faicon
              <span style="color: #a6e3a1;">"file-o"</span>
              <span style="color: #f38ba8;">:face</span> 'all-the-icons-green
              <span style="color: #f38ba8;">:v-adjust</span> -0.1)
     <span style="color: #f38ba8;">:function</span> #'citar-has-files
     <span style="color: #f38ba8;">:padding</span> <span style="color: #a6e3a1;">"  "</span> <span style="color: #6c7086;">; </span><span style="color: #6c7086;">need this because the default padding is too low for these icons</span>
     <span style="color: #f38ba8;">:tag</span> <span style="color: #a6e3a1;">"has:files"</span>))

  (<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">citar-indicator-links-icons</span>
    (citar-indicator-create
     <span style="color: #f38ba8;">:symbol</span> (all-the-icons-octicon
              <span style="color: #a6e3a1;">"link"</span>
              <span style="color: #f38ba8;">:face</span> 'all-the-icons-orange
              <span style="color: #f38ba8;">:v-adjust</span> 0.01)
     <span style="color: #f38ba8;">:function</span> #'citar-has-links
     <span style="color: #f38ba8;">:padding</span> <span style="color: #a6e3a1;">"  "</span>
     <span style="color: #f38ba8;">:tag</span> <span style="color: #a6e3a1;">"has:links"</span>))

  (<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">citar-indicator-notes-icons</span>
    (citar-indicator-create
     <span style="color: #f38ba8;">:symbol</span> (all-the-icons-material
              <span style="color: #a6e3a1;">"speaker_notes"</span>
              <span style="color: #f38ba8;">:face</span> 'all-the-icons-blue
              <span style="color: #f38ba8;">:v-adjust</span> -0.3)
     <span style="color: #f38ba8;">:function</span> #'citar-has-notes
     <span style="color: #f38ba8;">:padding</span> <span style="color: #a6e3a1;">"  "</span>
     <span style="color: #f38ba8;">:tag</span> <span style="color: #a6e3a1;">"has:notes"</span>))

  (<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">citar-indicator-cited-icons</span>
    (citar-indicator-create
     <span style="color: #f38ba8;">:symbol</span> (all-the-icons-faicon
              <span style="color: #a6e3a1;">"circle-o"</span>
              <span style="color: #f38ba8;">:face</span> 'all-the-icon-green)
     <span style="color: #f38ba8;">:function</span> #'citar-is-cited
     <span style="color: #f38ba8;">:padding</span> <span style="color: #a6e3a1;">"  "</span>
     <span style="color: #f38ba8;">:tag</span> <span style="color: #a6e3a1;">"is:cited"</span>))
  <span style="color: #f38ba8;">:hook</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">set up citation completion for latex, org-mode, and markdown</span>
  (LaTeX-mode . citar-capf-setup)
  (org-mode . citar-capf-setup)
  (markdown-mode . citar-capf-setup)
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> citar-indicators
        (list citar-indicator-files-icons
              citar-indicator-links-icons
              citar-indicator-notes-icons
              citar-indicator-cited-icons))
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"nb"</span> '(citar-open <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"citar"</span>))
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> citar-notes-paths (list patrl/notes-path))
  (<span style="color: #cba6f7;">setq</span> citar-library-paths (list patrl/library-path))
  (<span style="color: #cba6f7;">setq</span> citar-bibliography (list patrl/global-bib-file)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> citar-embark
  <span style="color: #f38ba8;">:after</span> citar embark
  <span style="color: #f38ba8;">:config</span> (citar-embark-mode))
</pre>
</div>
</div>
<div id="outline-container-org8b451dd" class="outline-4">
<h4 id="org8b451dd"><span class="section-number-4">9.0.1.</span> Engrave</h4>
<div class="outline-text-4" id="text-9-0-1">
<p>
Uses emacs' font lock to highlight source code blocks in latex.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> engrave-faces)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6e0f7da" class="outline-2">
<h2 id="org6e0f7da"><span class="section-number-2">10.</span> Org</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-orgd22d801" class="outline-3">
<h3 id="orgd22d801"><span class="section-number-3">10.1.</span> Evil integration</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> evil-org
  <span style="color: #f38ba8;">:after</span> org
  <span style="color: #f38ba8;">:hook</span> (org-mode . (<span style="color: #cba6f7;">lambda</span> () evil-org-mode))
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">require</span> '<span style="color: #fab387;">evil-org-agenda</span>)
  (evil-org-agenda-set-keys))
</pre>
</div>
</div>
</div>
<div id="outline-container-org6966988" class="outline-3">
<h3 id="org6966988"><span class="section-number-3">10.2.</span> Org-auctex</h3>
<div class="outline-text-3" id="text-10-2">
<p>
Provides faster latex previews for <code>org-mode</code>.
</p>

<ul class="org-ul">
<li><a href="https://github.com/karthink/org-auctex">GitHub - karthink/org-auctex: Better latex previews for org-mode</a></li>
<li>See <a href="https://karthinks.com/software/fast-latex-previews-in-org-mode/">https://karthinks.com/software/fast-latex-previews-in-org-mode/</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> org-auctex
  <span style="color: #f38ba8;">:ensure</span> (<span style="color: #f38ba8;">:type</span> git <span style="color: #f38ba8;">:host</span> github <span style="color: #f38ba8;">:repo</span>
                   <span style="color: #a6e3a1;">"karthink/org-auctex"</span>)
  <span style="color: #f38ba8;">:hook</span> (org-mode . org-auctex-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org12a635b" class="outline-3">
<h3 id="org12a635b"><span class="section-number-3">10.3.</span> Transclusion</h3>
<div class="outline-text-3" id="text-10-3">
<ul class="org-ul">
<li><a href="https://nobiot.github.io/org-transclusion/">Org-transclusion User Manual</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> org-transclusion
  <span style="color: #f38ba8;">:after</span> org
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"nt"</span> '(org-transclusion-mode <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"transclusion mode"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org8e694f9" class="outline-3">
<h3 id="org8e694f9"><span class="section-number-3">10.4.</span> Appear</h3>
<div class="outline-text-3" id="text-10-4">
<ul class="org-ul">
<li><a href="https://github.com/awth13/org-appear">GitHub - awth13/org-appear: Toggle visibility of hidden Org mode element part&#x2026;</a></li>
</ul>

<p>
Reveals hidden elements interactively.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> org-appear
  <span style="color: #f38ba8;">:after</span> org
  <span style="color: #f38ba8;">:hook</span> (org-mode . org-appear-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org6a53771" class="outline-3">
<h3 id="org6a53771"><span class="section-number-3">10.5.</span> Cliplink</h3>
<div class="outline-text-3" id="text-10-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> org-cliplink
  <span style="color: #f38ba8;">:after</span> org
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/local-leader-keys</span>
    <span style="color: #f38ba8;">:keymaps</span> 'org-mode-map
    <span style="color: #a6e3a1;">"lc"</span> '(org-cliplink <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"cliplink"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org0e3bd7b" class="outline-3">
<h3 id="org0e3bd7b"><span class="section-number-3">10.6.</span> Org modern</h3>
<div class="outline-text-3" id="text-10-6">
<ul class="org-ul">
<li><a href="https://github.com/minad/org-modern">GitHub - minad/org-modern: :unicorn: Modern Org Style</a></li>
</ul>

<p>
Enable org-modern mode globally.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> org-modern
  <span style="color: #f38ba8;">:after</span> org
  <span style="color: #f38ba8;">:config</span> (global-org-modern-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf71e4f8" class="outline-3">
<h3 id="orgf71e4f8"><span class="section-number-3">10.7.</span> Org roam</h3>
<div class="outline-text-3" id="text-10-7">
<ul class="org-ul">
<li><a href="https://www.orgroam.com/manual.html">Org-roam User Manual</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> org-roam
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"nr"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"roam"</span>)
    <span style="color: #a6e3a1;">"nri"</span> '(org-roam-node-insert t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"insert node"</span>)
    <span style="color: #a6e3a1;">"nrt"</span> '(org-roam-buffer-toggle t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"roam buffer toggle"</span>)
    <span style="color: #a6e3a1;">"nrc"</span> '(org-roam-capture t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"roam capture"</span>)
    <span style="color: #a6e3a1;">"nrf"</span> '(org-roam-node-find <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"find node"</span>)
    <span style="color: #a6e3a1;">"nrd"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"dailies"</span>)
    <span style="color: #a6e3a1;">"nrdt"</span> '(org-roam-dailies-goto-today <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"today"</span>)
    <span style="color: #a6e3a1;">"nrdt"</span> '(org-roam-dailies-goto-yesterday <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"today"</span>)
    <span style="color: #a6e3a1;">"nrdT"</span> '(org-roam-dailies-goto-tomorrow <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"today"</span>)
    <span style="color: #a6e3a1;">"nrdd"</span> '(org-roam-dailies-goto-date <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"goto date"</span>))
  <span style="color: #f38ba8;">:config</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">org-roam-buffer</span>
  (add-to-list 'display-buffer-alist
               '(<span style="color: #a6e3a1;">"\\*org-roam\\*"</span>
                 (display-buffer-in-direction)
                 (direction . right)
                 (window-width . 0.33)
                 (window-height . fit-window-to-buffer)))
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">get tags to show up in '</span><span style="color: #fab387;">org-roam-node-find</span><span style="color: #6c7086;">':</span>
  (<span style="color: #cba6f7;">setq</span> org-roam-node-display-template
        (concat <span style="color: #a6e3a1;">"${title:*} "</span>
                (propertize <span style="color: #a6e3a1;">"${tags:10}"</span> 'face 'org-tag)))
  (<span style="color: #cba6f7;">setq</span> org-roam-completion-everywhere t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">roam completion anywhere</span>
  (<span style="color: #cba6f7;">setq</span> org-roam-directory patrl/notes-path)
  (<span style="color: #cba6f7;">setq</span> org-roam-db-location (concat org-roam-directory <span style="color: #a6e3a1;">"/.database/org-roam.db"</span>))
  (<span style="color: #cba6f7;">unless</span> (&lt; emacs-major-version 29)
    (<span style="color: #cba6f7;">setq</span> org-roam-database-connector 'sqlite-builtin))
  (org-roam-db-autosync-mode) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">ensures that org-roam is available on startup</span>


  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">dailies config</span>
  (<span style="color: #cba6f7;">setq</span> org-roam-dailies-directory <span style="color: #a6e3a1;">"daily/"</span>)
  (<span style="color: #cba6f7;">setq</span> org-roam-dailies-capture-templates
        '((<span style="color: #a6e3a1;">"d"</span> <span style="color: #a6e3a1;">"default"</span> entry
           <span style="color: #a6e3a1;">"* %?"</span>
           <span style="color: #f38ba8;">:target</span> (file+head <span style="color: #a6e3a1;">"%&lt;%Y-%m-%d&gt;.org"</span>
                              <span style="color: #a6e3a1;">"#+title: %&lt;%Y-%m-%d&gt;\n#+filetags: daily\n"</span>)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org8612c29" class="outline-3">
<h3 id="org8612c29"><span class="section-number-3">10.8.</span> Export</h3>
<div class="outline-text-3" id="text-10-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> citeproc
  <span style="color: #f38ba8;">:after</span> org)

(<span style="color: #cba6f7;">with-eval-after-load</span> 'ox-latex
   (add-to-list 'org-latex-classes
                '(<span style="color: #a6e3a1;">"scrartcl"</span>
                  <span style="color: #a6e3a1;">"\\documentclass[letterpaper]{scrartcl}"</span>
                  (<span style="color: #a6e3a1;">"\\section{%s}"</span> . <span style="color: #a6e3a1;">"\\section*{%s}"</span>)
                  (<span style="color: #a6e3a1;">"\\subsection{%s}"</span> . <span style="color: #a6e3a1;">"\\subsection*{%s}"</span>)
                  (<span style="color: #a6e3a1;">"\\subsubsection{%s}"</span> . <span style="color: #a6e3a1;">"\\subsubsection*{%s}"</span>)
                  (<span style="color: #a6e3a1;">"\\paragraph{%s}"</span> . <span style="color: #a6e3a1;">"\\paragraph*{%s}"</span>)
                  (<span style="color: #a6e3a1;">"\\subparagraph{%s}"</span> . <span style="color: #a6e3a1;">"\\subparagraph*{%s}"</span>))))

(<span style="color: #cba6f7;">with-eval-after-load</span> 'ox-latex
  (add-to-list 'org-latex-classes
             '(<span style="color: #a6e3a1;">"memoir"</span>
               <span style="color: #a6e3a1;">"\\documentclass{memoir}"</span>
               (<span style="color: #a6e3a1;">"\\chapter{%s}"</span> . <span style="color: #a6e3a1;">"\\chapter*{%s}"</span>)
               (<span style="color: #a6e3a1;">"\\section{%s}"</span> . <span style="color: #a6e3a1;">"\\section*{%s}"</span>)
               (<span style="color: #a6e3a1;">"\\subsection{%s}"</span> . <span style="color: #a6e3a1;">"\\subsection*{%s}"</span>)
               (<span style="color: #a6e3a1;">"\\subsubsection{%s}"</span> . <span style="color: #a6e3a1;">"\\subsubsection*{%s}"</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org10c1e2a" class="outline-3">
<h3 id="org10c1e2a"><span class="section-number-3">10.9.</span> Highlighting</h3>
<div class="outline-text-3" id="text-10-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> htmlize)
</pre>
</div>
</div>
</div>
<div id="outline-container-org2fa2059" class="outline-3">
<h3 id="org2fa2059"><span class="section-number-3">10.10.</span> Org-noter</h3>
<div class="outline-text-3" id="text-10-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> org-noter
  <span style="color: #f38ba8;">:commands</span>
  org-noter
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/local-leader-keys</span>
    <span style="color: #f38ba8;">:keymaps</span> 'org-noter-doc-mode-map
    <span style="color: #a6e3a1;">"i"</span> 'org-noter-insert-note)
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> org-noter-notes-search-path (list patrl/notes-path))
  (<span style="color: #cba6f7;">setq</span> org-noter-default-notes-file-names '(<span style="color: #a6e3a1;">"literature-notes.org"</span>))
  (<span style="color: #cba6f7;">setq</span> org-noter-hide-other nil)
  (<span style="color: #cba6f7;">setq</span> org-noter-always-create-frame nil))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org070a0b8" class="outline-2">
<h2 id="org070a0b8"><span class="section-number-2">11.</span> Completion</h2>
<div class="outline-text-2" id="text-11">
<p>
The completion framework I adopt exploits packages primarily developed by <a href="https://github.com/minad">Daniel Mendler</a>.
</p>

<ul class="org-ul">
<li><a href="https://kristofferbalintona.me/posts/202202211546/">Vertico, Marginalia, All-the-icons-completion, and Orderless | Kristoffer Bal&#x2026;</a></li>
</ul>
</div>
<div id="outline-container-org2d06ae2" class="outline-3">
<h3 id="org2d06ae2"><span class="section-number-3">11.1.</span> Vertico with orderless and marginalia</h3>
<div class="outline-text-3" id="text-11-1">
<ul class="org-ul">
<li><a href="https://github.com/minad/vertico">GitHub - minad/vertico: :dizzy: vertico.el - VERTical Interactive COmpletion</a></li>
<li><a href="https://github.com/minad/marginalia">GitHub - minad/marginalia: :scroll: marginalia.el - Marginalia in the minibuffer</a></li>
<li><a href="https://github.com/oantolin/orderless">GitHub - oantolin/orderless: Emacs completion style that matches multiple reg&#x2026;</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> vertico
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:init</span>
  (vertico-mode)
  (vertico-multiform-mode)
  (<span style="color: #cba6f7;">setq</span> vertico-multiform-categories
        '((file grid)
          (jinx grid (vertico-grid-annotate . 20))
          (citar buffer)))
  (<span style="color: #cba6f7;">setq</span> vertico-cycle t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">enable cycling for '</span><span style="color: #fab387;">vertico-next</span><span style="color: #6c7086;">' and '</span><span style="color: #fab387;">vertico-prev</span><span style="color: #6c7086;">'</span>
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #f38ba8;">:keymaps</span> 'vertico-map
            <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">keybindings to cycle through vertico results.</span>
            <span style="color: #a6e3a1;">"C-j"</span> 'vertico-next
            <span style="color: #a6e3a1;">"C-k"</span> 'vertico-previous
            <span style="color: #a6e3a1;">"C-f"</span> 'vertico-exit
            <span style="color: #a6e3a1;">"&lt;backspace&gt;"</span> 'vertico-directory-delete-char
            <span style="color: #a6e3a1;">"C-&lt;backspace&gt;"</span> 'vertico-directory-delete-word
            <span style="color: #a6e3a1;">"C-w"</span> 'vertico-directory-delete-word
            <span style="color: #a6e3a1;">"RET"</span> 'vertico-directory-enter)
  (<span style="color: #f38ba8;">:keymaps</span> 'minibuffer-local-map
            <span style="color: #a6e3a1;">"M-h"</span> 'backward-kill-word))

(<span style="color: #cba6f7;">use-package</span> orderless
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> completion-styles '(orderless)
        completion-category-defaults nil
        completion-category-overrides '((file (styles partial-completion)))))

(<span style="color: #cba6f7;">use-package</span> savehist
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:init</span>
  (savehist-mode))

(<span style="color: #cba6f7;">use-package</span> marginalia
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:after</span> vertico
  <span style="color: #f38ba8;">:custom</span>
  (marginalia-annotators '(marginalia-annotators-heavy marginalia-annotators-light nil))
  <span style="color: #f38ba8;">:init</span>
  (marginalia-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org2d28bb7" class="outline-3">
<h3 id="org2d28bb7"><span class="section-number-3">11.2.</span> Consult</h3>
<div class="outline-text-3" id="text-11-2">
<ul class="org-ul">
<li><a href="https://github.com/minad/consult">GitHub - minad/consult: :mag: consult.el - Consulting completing-read</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> consult
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"bb"</span> '(consult-buffer <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult buffer"</span>)
    <span style="color: #a6e3a1;">"Bb"</span> '(consult-bookmark <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult bookmark"</span>)
    <span style="color: #a6e3a1;">"ht"</span> '(consult-theme <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult theme"</span>)
    <span style="color: #a6e3a1;">"sr"</span> '(consult-ripgrep <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult rg"</span>)
    <span style="color: #a6e3a1;">"sg"</span> '(consult-grep <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult grep"</span>)
    <span style="color: #a6e3a1;">"sG"</span> '(consult-git-grep <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult git grep"</span>)
    <span style="color: #a6e3a1;">"sf"</span> '(consult-find <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult find"</span>)
    <span style="color: #a6e3a1;">"sF"</span> '(consult-locate <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult locate"</span>)
    <span style="color: #a6e3a1;">"sl"</span> '(consult-line <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult line"</span>)
    <span style="color: #a6e3a1;">"sy"</span> '(consult-yank-from-kill-ring <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult yank from kill ring"</span>)
    <span style="color: #a6e3a1;">"i"</span> '(consult-imenu <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult imenu"</span>))
  <span style="color: #f38ba8;">:config</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">use project.el to retrieve the project root</span>
  (<span style="color: #cba6f7;">setq</span> consult-project-root-function
        (<span style="color: #cba6f7;">lambda</span> ()
          (<span style="color: #cba6f7;">when-let</span> (project (project-current))
            (car (project-roots project))))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org3d548bb" class="outline-3">
<h3 id="org3d548bb"><span class="section-number-3">11.3.</span> Affe</h3>
<div class="outline-text-3" id="text-11-3">
<ul class="org-ul">
<li><a href="https://github.com/minad/affe">GitHub - minad/affe: :monkey: affe.el - Asynchronous Fuzzy Finder for Emacs</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> affe
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:after</span> orderless
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"sa"</span> '(affe-grep <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"affe grep"</span>)
    <span style="color: #a6e3a1;">"sw"</span> '(affe-find <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"affe find"</span>))
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">affe-orderless-regexp-compiler</span> (input _type _ignorecase)
    (<span style="color: #cba6f7;">setq</span> input (orderless-pattern-compiler input))
    (cons input (<span style="color: #cba6f7;">lambda</span> (str) (orderless--highlight input str))))
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> affe-regexp-compiler #'affe-orderless-regexp-compiler))
</pre>
</div>
</div>
</div>
<div id="outline-container-org62762ba" class="outline-3">
<h3 id="org62762ba"><span class="section-number-3">11.4.</span> Embark</h3>
<div class="outline-text-3" id="text-11-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> embark
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
     <span style="color: #a6e3a1;">"."</span> 'embark-act) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">easily accessible '</span><span style="color: #fab387;">embark-act</span><span style="color: #6c7086;">' binding.</span>
  (<span style="color: #a6e3a1;">"C-."</span> 'embark-act) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">overlaps with evil-repeat </span>
  (<span style="color: #a6e3a1;">"C-;"</span> 'embark-dwim) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">overlaps with IEdit</span>
  (<span style="color: #f38ba8;">:keymaps</span> 'vertico-map
            <span style="color: #a6e3a1;">"C-."</span> 'embark-act) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">embark on completion candidates</span>
  (<span style="color: #f38ba8;">:keymaps</span> 'embark-heading-map
            <span style="color: #a6e3a1;">"l"</span> 'org-id-store-link)
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> prefix-help-command #'embark-prefix-help-command)
  <span style="color: #f38ba8;">:config</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">Hide the mode line of the Embark live/completions buffers</span>
  (add-to-list 'display-buffer-alist
               '(<span style="color: #a6e3a1;">"\\`\\*Embark Collect </span><span style="color: #f38ba8;">\\</span><span style="color: #f38ba8;">(</span><span style="color: #a6e3a1;">Live</span><span style="color: #f38ba8;">\\</span><span style="color: #f38ba8;">|</span><span style="color: #a6e3a1;">Completions</span><span style="color: #f38ba8;">\\</span><span style="color: #f38ba8;">)</span><span style="color: #a6e3a1;">\\*"</span>
                 nil
                 (window-parameters (mode-line-format . none)))))

(<span style="color: #cba6f7;">use-package</span> embark-consult
  <span style="color: #f38ba8;">:after</span> (embark consult)
  <span style="color: #f38ba8;">:demand</span> t <span style="color: #6c7086;">; </span><span style="color: #6c7086;">only necessary if you have the hook below</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">if you want to have consult previews as you move around an</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">auto-updating embark collect buffer</span>
  <span style="color: #f38ba8;">:hook</span>
  (embark-collect-mode . consult-preview-at-point-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org795588c" class="outline-3">
<h3 id="org795588c"><span class="section-number-3">11.5.</span> Corfu</h3>
<div class="outline-text-3" id="text-11-5">
<ul class="org-ul">
<li><a href="https://github.com/minad/corfu">GitHub - minad/corfu: :desert<sub>island</sub>: corfu.el - COmpletion in Region FUnction</a></li>
</ul>

<p>
A minimal ui for <code>completion-in-region</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> corfu
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:hook</span>
  (eval-expression-minibuffer-setup . corfu-mode)
  <span style="color: #f38ba8;">:init</span>
  (global-corfu-mode)
  <span style="color: #f38ba8;">:custom</span>
  (corfu-cycle t) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">allows cycling through candidates</span>
  (corfu-auto nil) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">disables auto-completion</span>
  <span style="color: #f38ba8;">:bind</span>
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #f38ba8;">:keymaps</span> 'corfu-map
            <span style="color: #a6e3a1;">"SPC"</span> 'corfu-insert-separator)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">for compatibility with orderless</span>

(<span style="color: #cba6f7;">general-unbind</span>
  <span style="color: #f38ba8;">:states</span> '(insert)
  <span style="color: #a6e3a1;">"C-k"</span> <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">this was interfering with corfu completion</span>
  <span style="color: #f38ba8;">:states</span> '(normal)
  <span style="color: #a6e3a1;">"C-;"</span>) 

(<span style="color: #cba6f7;">use-package</span> emacs
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">setq</span> tab-always-indent 'complete)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">enable tab completion</span>
</pre>
</div>
</div>
<div id="outline-container-orgef2ed63" class="outline-4">
<h4 id="orgef2ed63"><span class="section-number-4">11.5.1.</span> Cape</h4>
<div class="outline-text-4" id="text-11-5-1">
<ul class="org-ul">
<li><a href="https://github.com/minad/cape">GitHub - minad/cape: 🦸cape.el - Completion At Point Extensions</a></li>
<li><a href="https://kristofferbalintona.me/posts/202203130102/">Cape | Kristoffer Balintona</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> cape
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">bindings for dedicated completion commands</span>
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #a6e3a1;">"M-p p"</span> 'completion-at-point <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">capf</span>
   <span style="color: #a6e3a1;">"M-p t"</span> 'complete-tag <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">etags</span>
   <span style="color: #a6e3a1;">"M-p d"</span> 'cape-dabbrev <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">dabbrev</span>
   <span style="color: #a6e3a1;">"M-p h"</span> 'cape-history
   <span style="color: #a6e3a1;">"M-p f"</span> 'cape-file
   <span style="color: #a6e3a1;">"M-p k"</span> 'cape-keyword
   <span style="color: #a6e3a1;">"M-p s"</span> 'cape-symbol
   <span style="color: #a6e3a1;">"M-p a"</span> 'cape-abbrev
   <span style="color: #a6e3a1;">"M-p i"</span> 'cape-ispell
   <span style="color: #a6e3a1;">"M-p l"</span> 'cape-line
   <span style="color: #a6e3a1;">"M-p w"</span> 'cape-dict
   <span style="color: #a6e3a1;">"M-p \\"</span> 'cape-tex
   <span style="color: #a6e3a1;">"M-p &amp;"</span> 'cape-sgml
   <span style="color: #a6e3a1;">"M-p r"</span> 'cape-rfc1345)
  <span style="color: #f38ba8;">:init</span>
  (add-to-list 'completion-at-point-functions #'cape-file)
  (add-to-list 'completion-at-point-functions #'cape-dabbrev))
</pre>
</div>

<p>
Convert the <code>company-reftex-labels</code> backend to a capf using <code>cape</code> and activate in in <code>LaTeX-mode</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> company-reftex
  <span style="color: #f38ba8;">:after</span> cape
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">reftex-setup-capf</span> ()
    (add-to-list 'completion-at-point-functions (cape-company-to-capf #'company-reftex-labels)))
  <span style="color: #f38ba8;">:hook</span>
  (LaTeX-mode . reftex-setup-capf))
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org2438181" class="outline-2">
<h2 id="org2438181"><span class="section-number-2">12.</span> Checkers</h2>
<div class="outline-text-2" id="text-12">
<ul class="org-ul">
<li>Use <code>flymake</code> over <code>flycheck</code>.</li>
</ul>
</div>
<div id="outline-container-org50c9830" class="outline-3">
<h3 id="org50c9830"><span class="section-number-3">12.1.</span> Flymake</h3>
<div class="outline-text-3" id="text-12-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> flymake
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #f38ba8;">:keymaps</span> 'flymake-mode-map
    <span style="color: #a6e3a1;">"cf"</span> '(consult-flymake <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult flymake"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">depends on consult</span>
    <span style="color: #a6e3a1;">"cc"</span> '(flymake-mode <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"toggle flymake"</span>)) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">depends on consult</span>
  <span style="color: #f38ba8;">:hook</span>
  (TeX-mode . flymake-mode) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">this is now working</span>
  (emacs-lisp-mode . flymake-mode)
  <span style="color: #f38ba8;">:custom</span>
  (flymake-no-changes-timeout nil)
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">general-nmap</span> <span style="color: #a6e3a1;">"] !"</span> 'flymake-goto-next-error)
  (<span style="color: #cba6f7;">general-nmap</span> <span style="color: #a6e3a1;">"[ !"</span> 'flymake-goto-prev-error))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfb4602d" class="outline-2">
<h2 id="orgfb4602d"><span class="section-number-2">13.</span> Tools</h2>
<div class="outline-text-2" id="text-13">
</div>
<div id="outline-container-org249c1bb" class="outline-3">
<h3 id="org249c1bb"><span class="section-number-3">13.1.</span> Recursion indicator</h3>
<div class="outline-text-3" id="text-13-1">
<ul class="org-ul">
<li><a href="https://github.com/minad/recursion-indicator">GitHub - minad/recursion-indicator: Recursion indicator for the mode-line</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> recursion-indicator
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:config</span>
  (recursion-indicator-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org576214e" class="outline-3">
<h3 id="org576214e"><span class="section-number-3">13.2.</span> Regular expressions</h3>
<div class="outline-text-3" id="text-13-2">
<p>
Use <code>rx</code> notation (S-expressions) as the default for constructing regular expressions in regex builder.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> re-builder
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:general</span> (<span style="color: #cba6f7;">patrl/leader-keys</span>
             <span style="color: #a6e3a1;">"se"</span> '(regexp-builder <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"regex builder"</span>))
  <span style="color: #f38ba8;">:config</span> (<span style="color: #cba6f7;">setq</span> reb-re-syntax 'rx))
</pre>
</div>
</div>
</div>
<div id="outline-container-org7115a0b" class="outline-3">
<h3 id="org7115a0b"><span class="section-number-3">13.3.</span> PDF tools</h3>
<div class="outline-text-3" id="text-13-3">
<p>
Because this uses natively-compiled code, I install this alongside emacs via nix.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> pdf-tools
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:hook</span> (TeX-after-compilation-finished . TeX-revert-document-buffer)
  <span style="color: #f38ba8;">:mode</span> (<span style="color: #a6e3a1;">"\\.pdf\\'"</span> . pdf-view-mode)
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">require</span> '<span style="color: #fab387;">pdf-outline</span>)
  (<span style="color: #cba6f7;">require</span> '<span style="color: #fab387;">pdf-occur</span>)
  (pdf-tools-install <span style="color: #f38ba8;">:no-query</span>))

</pre>
</div>
</div>
</div>
<div id="outline-container-orge693677" class="outline-3">
<h3 id="orge693677"><span class="section-number-3">13.4.</span> Jinx</h3>
<div class="outline-text-3" id="text-13-4">
<ul class="org-ul">
<li><a href="https://github.com/minad/jinx">GitHub - minad/jinx: 🪄 Enchanted Spell Checker</a></li>
</ul>

<p>
Because this uses natively-compiled code, I install this alongside emacs via nix, rather than in the usual way (hence the <code>build-in</code> straight keyword).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> jinx
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:hook</span> (emacs-startup . global-jinx-mode)
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #a6e3a1;">"M-$"</span> 'jinx-correct
   <span style="color: #a6e3a1;">"C-M-$"</span> 'jinx-languages))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbde0ae6" class="outline-3">
<h3 id="orgbde0ae6"><span class="section-number-3">13.5.</span> Helpful</h3>
<div class="outline-text-3" id="text-13-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> helpful
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"hc"</span> '(helpful-command <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"helpful command"</span>)
    <span style="color: #a6e3a1;">"hf"</span> '(helpful-callable <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"helpful callable"</span>)
    <span style="color: #a6e3a1;">"hh"</span> '(helpful-at-point <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"helpful at point"</span>)
    <span style="color: #a6e3a1;">"hF"</span> '(helpful-function <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"helpful function"</span>)
    <span style="color: #a6e3a1;">"hv"</span> '(helpful-variable <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"helpful variable"</span>)
    <span style="color: #a6e3a1;">"hk"</span> '(helpful-key <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"helpful key"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org2b400b5" class="outline-3">
<h3 id="org2b400b5"><span class="section-number-3">13.6.</span> Deadgrep</h3>
<div class="outline-text-3" id="text-13-6">
<ul class="org-ul">
<li><a href="https://github.com/Wilfred/deadgrep">GitHub - Wilfred/deadgrep: fast, friendly searching with ripgrep and Emacs</a></li>
</ul>

<p>
The best search package.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> deadgrep
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"sd"</span> '(deadgrep <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"deadgrep"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd34f0da" class="outline-3">
<h3 id="orgd34f0da"><span class="section-number-3">13.7.</span> Snippets</h3>
<div class="outline-text-3" id="text-13-7">
</div>
<div id="outline-container-orgefa782b" class="outline-4">
<h4 id="orgefa782b"><span class="section-number-4">13.7.1.</span> Auto-activating snippets</h4>
<div class="outline-text-4" id="text-13-7-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> aas
  <span style="color: #f38ba8;">:hook</span> (LaTeX-mode . aas-activate-for-major-mode)
  <span style="color: #f38ba8;">:hook</span> (org-mode . aas-activate-for-major-mode)
  <span style="color: #f38ba8;">:config</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">easy emoji entry in text mode.</span>
  (aas-set-snippets 'text-mode
    <span style="color: #a6e3a1;">":-)"</span> <span style="color: #a6e3a1;">"&#128578;"</span>
    <span style="color: #a6e3a1;">"8-)"</span> <span style="color: #a6e3a1;">"&#128526;"</span>
    <span style="color: #a6e3a1;">":rofl"</span> <span style="color: #a6e3a1;">"&#129315;"</span>
    <span style="color: #a6e3a1;">":lol"</span> <span style="color: #a6e3a1;">"&#128514;"</span>
    <span style="color: #a6e3a1;">"&lt;3"</span> <span style="color: #a6e3a1;">"&#10084;&#65039;"</span>
    <span style="color: #a6e3a1;">":eyes"</span> <span style="color: #a6e3a1;">"&#128064;"</span>
    <span style="color: #a6e3a1;">":dragon"</span> <span style="color: #a6e3a1;">"&#128009;"</span>
    <span style="color: #a6e3a1;">":fire"</span> <span style="color: #a6e3a1;">"&#128293;"</span>
    <span style="color: #a6e3a1;">":hole"</span> <span style="color: #a6e3a1;">"&#128371;&#65039;"</span>
    <span style="color: #a6e3a1;">":flush"</span> <span style="color: #a6e3a1;">"&#128563;"</span>
    <span style="color: #a6e3a1;">":wow"</span> <span style="color: #a6e3a1;">"&#128558;"</span>))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> laas
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">disables accent snippets - things like 'l (which expands to \textsl{}) end up being very disruptive in practice.</span>
  <span style="color: #f38ba8;">:init</span> (<span style="color: #cba6f7;">setq</span> laas-accent-snippets nil)
  <span style="color: #f38ba8;">:hook</span> ((LaTeX-mode . laas-mode)
           (org-mode . laas-mode))
  <span style="color: #f38ba8;">:config</span>
  (aas-set-snippets 'laas-mode
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">I need to make sure not to accidentally trigger the following, so I should only use impossible (or extremely rare) bigrams/trigrams.</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"*b" (lambda () (interactive)</span>
    <span style="color: #6c7086;">;;        </span><span style="color: #6c7086;">(yas-expand-snippet "\\textbf{$1}$0"))</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"*i" (lambda () (interactive)</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">    (yas-expand-snippet "\\textit{$1}$0"))</span>
    <span style="color: #a6e3a1;">"mx"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
              (yas-expand-snippet <span style="color: #a6e3a1;">"\\\\($1\\\\)$0"</span>))
    <span style="color: #a6e3a1;">"mq"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
              (yas-expand-snippet <span style="color: #a6e3a1;">"\\[</span><span style="color: #fab387;">$1\\</span><span style="color: #a6e3a1;">]$0"</span>))
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"*I" (lambda () (interactive)</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">     (yas-expand-snippet "\\begin{enumerate}\n$&gt;\\item $0\n\\end{enumerate}"))</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"*e" (lambda () (interactive)</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">     (yas-expand-snippet "\\begin{exe}\n$&gt;\\ex $0\n\\end{exe}"))</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"*f" (lambda () (interactive)</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">     (yas-expand-snippet "\\begin{forest}\n[{$1}\n[{$2}]\n[{$0}]\n]\n\\end{forest}"))</span>
    <span style="color: #a6e3a1;">"*\""</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
              (yas-expand-snippet <span style="color: #a6e3a1;">"\\enquote{$1}$0"</span>))
    <span style="color: #f38ba8;">:cond</span> #'texmathp <span style="color: #6c7086;">; </span><span style="color: #6c7086;">expand only while in math</span>
    <span style="color: #a6e3a1;">"Olon"</span> <span style="color: #a6e3a1;">"O(n \\log n)"</span>
    <span style="color: #a6e3a1;">";:"</span> <span style="color: #a6e3a1;">"\\coloneq"</span>
    <span style="color: #a6e3a1;">";;N"</span> <span style="color: #a6e3a1;">"\\mathbb{N}"</span>
    <span style="color: #a6e3a1;">";T"</span> <span style="color: #a6e3a1;">"\\top"</span>
    <span style="color: #a6e3a1;">";B"</span> <span style="color: #a6e3a1;">"\\bot"</span>
    <span style="color: #a6e3a1;">";;x"</span> <span style="color: #a6e3a1;">"\\times"</span>
    <span style="color: #a6e3a1;">";;v"</span> <span style="color: #a6e3a1;">"\\veebar"</span>
    <span style="color: #a6e3a1;">";;u"</span> <span style="color: #a6e3a1;">"\\cup"</span>
    <span style="color: #a6e3a1;">";;{"</span> <span style="color: #a6e3a1;">"\\subseteq"</span>
    <span style="color: #a6e3a1;">";D"</span> <span style="color: #a6e3a1;">"\\Diamond"</span>
    <span style="color: #a6e3a1;">";;b"</span> <span style="color: #a6e3a1;">"\\Box"</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">bind to functions!</span>
    <span style="color: #a6e3a1;">"sum"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
              (yas-expand-snippet <span style="color: #a6e3a1;">"\\sum_{$1}^{$2} $0"</span>))
    <span style="color: #a6e3a1;">"grandu"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
              (yas-expand-snippet <span style="color: #a6e3a1;">"\\bigcup</span><span style="color: #f9e2af;">\</span><span style="color: #a6e3a1;">limits_{$1} $0"</span>))
    <span style="color: #a6e3a1;">"Span"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
               (yas-expand-snippet <span style="color: #a6e3a1;">"\\Span($1)$0"</span>))
    <span style="color: #a6e3a1;">"lam"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
              (yas-expand-snippet <span style="color: #a6e3a1;">"\\lambda $1_{$2}\\,.\\,$0"</span>))
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"set" (lambda () (interactive)</span>
    <span style="color: #6c7086;">;;           </span><span style="color: #6c7086;">(yas-expand-snippet "\\set{ $1 | $2} $0"))</span>
    <span style="color: #a6e3a1;">"txt"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
                (yas-expand-snippet <span style="color: #a6e3a1;">"\\text{$1} $0"</span>))
    <span style="color: #a6e3a1;">";;o"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>)
                (yas-expand-snippet <span style="color: #a6e3a1;">"\\oplus"</span>))
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">"ev" (lambda () (interactive)</span>
    <span style="color: #6c7086;">;;             </span><span style="color: #6c7086;">(yas-expand-snippet "\\left\\llbracket$3\\right\\rrbracket^$1_$2 $3"))</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">clash with event type sigs</span>
    <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">add accent snippets</span>
    <span style="color: #f38ba8;">:cond</span> #'laas-object-on-left-condition
    <span style="color: #a6e3a1;">"qq"</span> (<span style="color: #cba6f7;">lambda</span> () (<span style="color: #cba6f7;">interactive</span>) (laas-wrap-previous-object <span style="color: #a6e3a1;">"sqrt"</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org86eb88d" class="outline-4">
<h4 id="org86eb88d"><span class="section-number-4">13.7.2.</span> yasnippet</h4>
<div class="outline-text-4" id="text-13-7-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> yasnippet
  <span style="color: #f38ba8;">:config</span>
  (yas-reload-all)
  (add-to-list 'yas-snippet-dirs <span style="color: #a6e3a1;">"~/.config/emacs/snippets"</span>)
  (yas-global-mode 1))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc10c9d3" class="outline-4">
<h4 id="orgc10c9d3"><span class="section-number-4">13.7.3.</span> Tempel</h4>
<div class="outline-text-4" id="text-13-7-3">
<ul class="org-ul">
<li><a href="https://github.com/minad/tempel">GitHub - minad/tempel: :classical<sub>building</sub>: TempEl - Simple templates for Emacs</a></li>
</ul>

<p>
Templates can be found in <a href="templates">templates</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> tempel
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #a6e3a1;">"M-p +"</span> 'tempel-complete) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">M-p completion prefix; see `</span><span style="color: #fab387;">cape</span><span style="color: #6c7086;">'</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"ti"</span> '(tempel-insert <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"tempel insert"</span>))
  (<span style="color: #f38ba8;">:keymaps</span> 'tempel-map
            <span style="color: #a6e3a1;">"TAB"</span> 'tempel-next) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">progress through fields via `</span><span style="color: #fab387;">TAB</span><span style="color: #6c7086;">'</span>
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">tempel-setup-capf</span> ()
    (add-hook 'completion-at-point-functions #'tempel-expand))
  (add-hook 'prog-mode-hook 'tempel-setup-capf)
  (add-hook 'text-mode-hook 'tempel-setup-capf))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org9aa75b8" class="outline-3">
<h3 id="org9aa75b8"><span class="section-number-3">13.8.</span> Web preview</h3>
<div class="outline-text-3" id="text-13-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> simple-httpd
  <span style="color: #f38ba8;">:commands</span> httpd-serve-directory)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga86c472" class="outline-3">
<h3 id="orga86c472"><span class="section-number-3">13.9.</span> FIXME Magit</h3>
<div class="outline-text-3" id="text-13-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> transient)

(<span style="color: #cba6f7;">use-package</span> magit
  <span style="color: #f38ba8;">:after</span> transient
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"g"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"git"</span>)
    <span style="color: #a6e3a1;">"gg"</span> '(magit-status <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"status"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org30bb5a8" class="outline-3">
<h3 id="org30bb5a8"><span class="section-number-3">13.10.</span> Eshell</h3>
<div class="outline-text-3" id="text-13-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> eshell
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"oe"</span> '(eshell <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"eshell"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org22d7c0a" class="outline-3">
<h3 id="org22d7c0a"><span class="section-number-3">13.11.</span> Language servers</h3>
<div class="outline-text-3" id="text-13-11">
</div>
<div id="outline-container-org9c891ce" class="outline-4">
<h4 id="org9c891ce"><span class="section-number-4">13.11.1.</span> LSP mode</h4>
<div class="outline-text-4" id="text-13-11-1">
<p>
Note I still need to set keybindings
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> lsp-mode
  <span style="color: #f38ba8;">:custom</span>
  (lsp-completion-provider <span style="color: #f38ba8;">:none</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">we use corfu!</span>
  <span style="color: #f38ba8;">:init</span>
  (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">patrl/lsp-mode-setup-completion</span> ()
    (<span style="color: #cba6f7;">setf</span> (alist-get 'styles (alist-get 'lsp-capf completion-category-defaults))
          '(orderless))) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">Configure orderless</span>
  <span style="color: #f38ba8;">:hook</span>
  (lsp-mode . lsp-enable-which-key-integration)
  (lsp-completion-mode . patrl/lsp-mode-setup-completion) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">setup orderless completion style.</span>
  <span style="color: #f38ba8;">:commands</span>
  lsp)

(<span style="color: #cba6f7;">use-package</span> lsp-ui
  <span style="color: #f38ba8;">:after</span> lsp-mode
  <span style="color: #f38ba8;">:commands</span> lsp-ui-mode)

(<span style="color: #cba6f7;">use-package</span> lsp-haskell
  <span style="color: #f38ba8;">:after</span> lsp-mode
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> lsp-haskell-server-path <span style="color: #a6e3a1;">"haskell-language-server"</span>) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">for some reason this doesn't get found automatically</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">(setq lsp-haskell-formatting-provider "brittany")</span>
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org8d270e8" class="outline-4">
<h4 id="org8d270e8"><span class="section-number-4">13.11.2.</span> Eglot</h4>
<div class="outline-text-4" id="text-13-11-2">
<ul class="org-ul">
<li>Integrating corfu with eglot: <a href="https://github.com/minad/corfu/wiki">Home · minad/corfu Wiki · GitHub</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> eglot
  <span style="color: #f38ba8;">:ensure</span> nil
  <span style="color: #f38ba8;">:init</span> (<span style="color: #cba6f7;">setq</span> completion-category-overrides '((eglot (styles orderless))))
  <span style="color: #f38ba8;">:commands</span> eglot
  <span style="color: #f38ba8;">:config</span>
  (add-to-list 'eglot-server-programs '(haskell-mode . (<span style="color: #a6e3a1;">"haskell-language-server"</span> <span style="color: #a6e3a1;">"--lsp"</span>))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org80cdb4a" class="outline-3">
<h3 id="org80cdb4a"><span class="section-number-3">13.12.</span> direnv</h3>
<div class="outline-text-3" id="text-13-12">
<p>
Essential, since I'm on NixOS.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> direnv
  <span style="color: #f38ba8;">:config</span>
  (direnv-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcc46101" class="outline-3">
<h3 id="orgcc46101"><span class="section-number-3">13.13.</span> Kmonad</h3>
<div class="outline-text-3" id="text-13-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> kbd-mode
  <span style="color: #f38ba8;">:ensure</span> (<span style="color: #f38ba8;">:type</span> git <span style="color: #f38ba8;">:host</span> github <span style="color: #f38ba8;">:repo</span>
                   <span style="color: #a6e3a1;">"kmonad/kbd-mode"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org41f3412" class="outline-3">
<h3 id="org41f3412"><span class="section-number-3">13.14.</span> Elfeed</h3>
<div class="outline-text-3" id="text-13-14">
<p>
Resources:
</p>
<ul class="org-ul">
<li><a href="https://karthinks.com/software/lazy-elfeed/">Lazy Elfeed | Karthinks</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #6c7086;">;; </span><span style="color: #6c7086;">We write a function to determine how we want elfeed to display the buffer with the current entry.</span>
(<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">patrl/elfeed-display-buffer</span> (buf <span style="color: #f9e2af;">&amp;optional</span> act)
  (pop-to-buffer buf)
  (set-window-text-height (get-buffer-window) (round (* 0.7 (frame-height)))))

(<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">patrl/elfeed-search-show-entry-pre</span> (<span style="color: #f9e2af;">&amp;optional</span> lines)
  <span style="color: #6c7086;">"Returns a function to scroll forward or back in the Elfeed search results, displaying entries without switching to them."</span>
  (<span style="color: #cba6f7;">lambda</span> (times)
    (<span style="color: #cba6f7;">interactive</span> <span style="color: #a6e3a1;">"p"</span>)
    (forward-line (* times (<span style="color: #cba6f7;">or</span> lines 0)))
    (recenter)
    (call-interactively #'elfeed-search-show-entry)
    (select-window (previous-window))
    (<span style="color: #cba6f7;">unless</span> elfeed-search-remain-on-entry (forward-line -1))))

(<span style="color: #cba6f7;">use-package</span> elfeed
  <span style="color: #f38ba8;">:commands</span> elfeed
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"oE"</span> '(elfeed <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"elfeed"</span>))
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">:config</span>
  (<span style="color: #cba6f7;">setq</span> elfeed-show-entry-switch #'patrl/elfeed-display-buffer))

(<span style="color: #cba6f7;">use-package</span> elfeed-org
  <span style="color: #f38ba8;">:init</span>
 (<span style="color: #cba6f7;">setq</span> rmh-elfeed-org-files (list <span style="color: #a6e3a1;">"~/MEGA/org/elfeed.org"</span>))
  <span style="color: #f38ba8;">:config</span>
  (elfeed-org))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf738075" class="outline-3">
<h3 id="orgf738075"><span class="section-number-3">13.15.</span> Notmuch</h3>
<div class="outline-text-3" id="text-13-15">
<p>
A gmail-focused notmuch setup, with <code>lieer</code> as the sync backend.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> notmuch
  <span style="color: #f38ba8;">:init</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">in gmail, messages are trashed by removing the '</span><span style="color: #fab387;">inbox</span><span style="color: #6c7086;">' tag, and adding the '</span><span style="color: #fab387;">trash</span><span style="color: #6c7086;">' tag. This will move messages to the gmail trash folder, but won't permnanently delete them.</span>
  (<span style="color: #cba6f7;">defvar</span> <span style="color: #cdd6f4;">+notmuch-delete-tags</span> '(<span style="color: #a6e3a1;">"+trash"</span> <span style="color: #a6e3a1;">"-inbox"</span> <span style="color: #a6e3a1;">"-unread"</span> <span style="color: #a6e3a1;">"-new"</span>))
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">in gmail, messages are archived simply by removing the '</span><span style="color: #fab387;">inbox</span><span style="color: #6c7086;">' tag.</span>
  (<span style="color: #cba6f7;">setq</span> notmuch-archive-tags '(<span style="color: #a6e3a1;">"-inbox"</span> <span style="color: #a6e3a1;">"-new"</span>))
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">show new mail first</span>
  <span style="color: #f38ba8;">:config</span>
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">the '</span><span style="color: #fab387;">new</span><span style="color: #6c7086;">' tag isn't synced to the gmail server; messages new to notmuch aquire this tag.</span>
  (add-to-list 'notmuch-saved-searches '(<span style="color: #f38ba8;">:name</span> <span style="color: #a6e3a1;">"new"</span> <span style="color: #f38ba8;">:query</span> <span style="color: #a6e3a1;">"tag:new"</span> <span style="color: #f38ba8;">:key</span> <span style="color: #a6e3a1;">"n"</span>))
  (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">+notmuch/search-delete</span> ()
    (<span style="color: #cba6f7;">interactive</span>)
    (notmuch-search-add-tag +notmuch-delete-tags)
    (notmuch-tree-next-message))
  (<span style="color: #cba6f7;">defun</span> <span style="color: #89b4fa;">+notmuch/tree-delete</span> ()
    (<span style="color: #cba6f7;">interactive</span>)
    (notmuch-tree-add-tag +notmuch-delete-tags)
    (notmuch-tree-next-message))
  (<span style="color: #cba6f7;">setq-default</span> notmuch-search-oldest-first nil)
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">sending mail using lieer</span>
  (<span style="color: #cba6f7;">setq</span> message-kill-buffer-on-exit t)
  (<span style="color: #cba6f7;">setq</span> sendmail-program <span style="color: #a6e3a1;">"gmi"</span>)
  (<span style="color: #cba6f7;">setq</span> send-mail-function 'sendmail-send-it)
  (<span style="color: #cba6f7;">setq</span> message-sendmail-extra-arguments '(<span style="color: #a6e3a1;">"send"</span> <span style="color: #a6e3a1;">"--quiet"</span> <span style="color: #a6e3a1;">"-t"</span> <span style="color: #a6e3a1;">"-C"</span> <span style="color: #a6e3a1;">"~/.mail/personal"</span>))
  (<span style="color: #cba6f7;">setq</span> notmuch-fcc-dirs nil) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">let gmail take care of sent mail</span>
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"on"</span> '(notmuch <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"notmuch"</span>))
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">single key deletion.</span>
  (<span style="color: #f38ba8;">:keymaps</span> 'notmuch-search-mode-map
            <span style="color: #f38ba8;">:states</span> 'normal
            <span style="color: #a6e3a1;">"D"</span> '+notmuch/search-delete)
  (<span style="color: #f38ba8;">:keymaps</span> 'notmuch-tree-mode-map
            <span style="color: #f38ba8;">:states</span> 'normal
            <span style="color: #a6e3a1;">"D"</span> '+notmuch/tree-delete))
</pre>
</div>
</div>
<div id="outline-container-org2a68e36" class="outline-4">
<h4 id="org2a68e36"><span class="section-number-4">13.15.1.</span> <span class="todo TODO">TODO</span> figure out why sent mail is saved to the home folder</h4>
</div>

<div id="outline-container-org3857916" class="outline-4">
<h4 id="org3857916"><span class="section-number-4">13.15.2.</span> <span class="todo TODO">TODO</span> consult-notmuch</h4>
<div class="outline-text-4" id="text-13-15-2">
<p>
Search emails interactively using <code>consult</code>.
</p>

<ul class="org-ul">
<li>FIXME Currently has a version mismatch.</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> consult-notmuch
  <span style="color: #f38ba8;">:disabled</span>
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"nmm"</span> '(consult-notmuch t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult notmuch"</span>)
    <span style="color: #a6e3a1;">"nmt"</span> '(consult-notmuch-tree t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult notmuch tree"</span>)
    <span style="color: #a6e3a1;">"nma"</span> '(consult-notmuch-address t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult notmuch address"</span>))
  <span style="color: #f38ba8;">:after</span> notmuch)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org972ef96" class="outline-2">
<h2 id="org972ef96"><span class="section-number-2">14.</span> Staging grounds</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-org2fa1667" class="outline-3">
<h3 id="org2fa1667"><span class="section-number-3">14.1.</span> Denote</h3>
<div class="outline-text-3" id="text-14-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> denote
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"nd"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"denote"</span>)
    <span style="color: #a6e3a1;">"ndd"</span> '(denote t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"denote"</span>)
    <span style="color: #a6e3a1;">"ndr"</span> '(denote-rename-file t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"rename file"</span>)
    <span style="color: #a6e3a1;">"ndl"</span> '(denote-link t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"link"</span>)
    <span style="color: #a6e3a1;">"ndb"</span> '(denote-backlinks t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"backlinks"</span>)
    <span style="color: #a6e3a1;">"ndf"</span> '(denote-sort-dired t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"sort dired"</span>))
  <span style="color: #f38ba8;">:hook</span>
  (text-mode . denote-fontify-links-mode-maybe)
  (dired-mode . denote-dired-mode)
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> denote-save-buffers nil)
  (<span style="color: #cba6f7;">setq</span> denote-infer-keywords t)
  (<span style="color: #cba6f7;">setq</span> denote-sort-keywords t)
  (<span style="color: #cba6f7;">setq</span> denote-prompts '(title keywords))
  (<span style="color: #cba6f7;">setq</span> denote-excluded-directories-regexp nil)
  (<span style="color: #cba6f7;">setq</span> denote-excluded-keywords-regexp nil)
  (<span style="color: #cba6f7;">setq</span> denote-rename-confirmations '(rewrite-front-matter modify-file-name))
  (<span style="color: #cba6f7;">setq</span> denote-date-prompt-use-org-read-date t)
  (<span style="color: #cba6f7;">setq</span> denote-backlinks-show-context t)
  (<span style="color: #cba6f7;">setq</span> denote-directory (expand-file-name <span style="color: #a6e3a1;">"~/MEGA/denote/"</span>))
  (denote-rename-buffer-mode 1))

(<span style="color: #cba6f7;">use-package</span> denote-journal
  <span style="color: #f38ba8;">:after</span> denote
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"nj"</span> '(<span style="color: #f38ba8;">:ignore</span> t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"journal"</span>)
    <span style="color: #a6e3a1;">"njj"</span> '(denote-journal-new-entry t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"new entry"</span>)
    <span style="color: #a6e3a1;">"nje"</span> '(denote-journal-new-or-existing-entry t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"new or existing entry"</span>)
    <span style="color: #a6e3a1;">"njl"</span> '(denote-journal-link-or-create-entry t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"link or create entry"</span>))
  <span style="color: #f38ba8;">:hook</span> (calendar-mode . denote-journal-calendar-mode)
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> denote-journal-directory (expand-file-name <span style="color: #a6e3a1;">"journal"</span> denote-directory))
  (<span style="color: #cba6f7;">setq</span> denote-journal-keyword <span style="color: #a6e3a1;">"journal"</span>)
  (<span style="color: #cba6f7;">setq</span> denote-journal-title-format 'day-date-month-year))
</pre>
</div>
</div>
</div>
<div id="outline-container-org19e56c6" class="outline-3">
<h3 id="org19e56c6"><span class="section-number-3">14.2.</span> Consult notes</h3>
<div class="outline-text-3" id="text-14-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> consult-notes
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"nn"</span> '(consult-notes t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"consult notes"</span>))
  <span style="color: #f38ba8;">:commands</span> (consult-notes
             consult-notes-search-in-all-notes)
  <span style="color: #f38ba8;">:config</span>
(<span style="color: #cba6f7;">when</span> (locate-library <span style="color: #a6e3a1;">"denote"</span>)
    (consult-notes-denote-mode))
  <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">search only for text files in denote dir</span>
(<span style="color: #cba6f7;">setq</span> consult-notes-denote-files-function (<span style="color: #cba6f7;">lambda</span> () (denote-directory-files nil t t))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org5274567" class="outline-3">
<h3 id="org5274567"><span class="section-number-3">14.3.</span> Ace window</h3>
<div class="outline-text-3" id="text-14-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> ace-window
  <span style="color: #f38ba8;">:demand</span> t
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #a6e3a1;">"M-o"</span> 'ace-window) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">global keybinding for ace-window (there's some lispy interference)</span>
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> aw-keys '(?a ?s ?d ?f ?g ?h ?j ?k ?l))) <span style="color: #6c7086;">;; </span><span style="color: #6c7086;">use the homerow to jump</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0488130" class="outline-3">
<h3 id="org0488130"><span class="section-number-3">14.4.</span> Rainbow mode</h3>
<div class="outline-text-3" id="text-14-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> rainbow-mode)
</pre>
</div>
</div>
</div>
<div id="outline-container-org1a09d8d" class="outline-3">
<h3 id="org1a09d8d"><span class="section-number-3">14.5.</span> Burly</h3>
<div class="outline-text-3" id="text-14-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> burly
  <span style="color: #f38ba8;">:init</span>
  (burly-tabs-mode +1)
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"Bf"</span> '(burly-bookmark-frames t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"bookmark frames"</span>)
    <span style="color: #a6e3a1;">"Bw"</span> '(burly-bookmark-windows t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"bookmark windows"</span>)
    <span style="color: #a6e3a1;">"Bo"</span> '(burly-open-bookmark t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"open bookmark"</span>)
    <span style="color: #a6e3a1;">"Bl"</span> '(burly-open-last-bookmark t <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"open last bookmark"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd975570" class="outline-3">
<h3 id="orgd975570"><span class="section-number-3">14.6.</span> Ebib</h3>
<div class="outline-text-3" id="text-14-6">
<ul class="org-ul">
<li><a href="https://joostkremers.github.io/ebib/">Ebib</a></li>
</ul>


<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> ebib
  <span style="color: #f38ba8;">:config</span>
  (<span style="color: #cba6f7;">setq</span> ebib-bibtex-dialect 'biblatex)
  (<span style="color: #cba6f7;">setq</span> ebib-preload-bib-files (list patrl/global-bib-file))
  <span style="color: #f38ba8;">:general</span>
  (<span style="color: #cba6f7;">patrl/leader-keys</span>
    <span style="color: #a6e3a1;">"ob"</span> '(ebib <span style="color: #f38ba8;">:wk</span> <span style="color: #a6e3a1;">"ebib"</span>)))
</pre>
</div>
</div>
<div id="outline-container-org606b224" class="outline-4">
<h4 id="org606b224"><span class="section-number-4">14.6.1.</span> <span class="todo TODO">TODO</span> add biblio support</h4>
</div>
</div>
<div id="outline-container-orgcae2444" class="outline-3">
<h3 id="orgcae2444"><span class="section-number-3">14.7.</span> Tree-sitter</h3>
<div class="outline-text-3" id="text-14-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #cba6f7;">use-package</span> tree-sitter <span style="color: #f38ba8;">:disabled</span>)
(<span style="color: #cba6f7;">use-package</span> tree-sitter-langs <span style="color: #f38ba8;">:disabled</span>)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Patrick D. Elliott</p>
<p class="date">Created: 2025-04-16 Wed 21:51</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
